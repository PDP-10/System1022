



   ************************************************************************
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                             SYSTEM 1022                              *
   *                                                                      *
   *                      DATA BASE ADMINISTRATOR'S                       *
   *                                                                      *
   *                          REFERENCE MANUAL                            *
   *                                                                      *
   *                          VERSION 117B(200)                           *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   *                                                                      *
   ************************************************************************







   CHAPTER 1       SYSTEM 1022 INSTALLATION PROCEDURE

           1.1     RESTORING THE DISTRIBUTION TAPE TO DISK  . . . . . 1-1
           1.2     RETURNING THE DISTRIBUTION TAPE  . . . . . . . . . 1-2
           1.3     FILE NAMES AND FUNCTIONS . . . . . . . . . . . . . 1-2
           1.3.1     1022 Images For Resident Disk Area -- TOPS-10  . 1-2
           1.3.2     1022 Images For Resident Disk Area -- TOPS-20  . 1-3
           1.3.3     Maintenance Files  . . . . . . . . . . . . . . . 1-3
           1.3.4     Documentation Files  . . . . . . . . . . . . . . 1-6
           1.3.5     Primer Files . . . . . . . . . . . . . . . . . . 1-7
           1.3.6     Interactive Report Generator . . . . . . . . . . 1-8
           1.4     OVERVIEW: INSTALLING 1022  . . . . . . . . . . . . 1-8
           1.4.1     Structure Of The 1022 System . . . . . . . . . . 1-8
           1.4.1.1   Model Configuration  . . . . . . . . . . . . . . 1-9
           1.4.1.2   Interactive 1022 . . . . . . . . . . . . . . . . 1-9
           1.4.1.3   Host Language System . . . . . . . . . . . . .  1-10
           1.4.2     Installing Interactive System 1022: Overview .  1-12
           1.4.3     Installing A Host Language Interface: Overview  1-12
           1.4.3.1   Make The OTS Compatible With 1022  . . . . . .  1-13
           1.4.3.2   Combine The HL OTS With The 1022 OTS . . . . .  1-14
           1.4.3.3   Adjust The Interface Of Program To OTS . . . .  1-14
           1.4.3.3.1 Forced Migration To FORTRAN-6  . . . . . . . .  1-15
           1.4.3.3.2 Modified And Unmodified Host Languages . . . .  1-15


   CHAPTER 2       SYSTEM 1022 INSTALLATION GUIDE

           2.1     INTRODUCTION . . . . . . . . . . . . . . . . . . . 2-1
           2.1.1     Introduction To The INSTAL Program . . . . . . . 2-2
           2.2     INSTALL INTERACTIVE 1022 SYSTEM  . . . . . . . . . 2-2
           2.2.1     TOPS-10 Interactive 1022 System  . . . . . . . . 2-2
           2.2.2     TOPS-20 Interactive 1022 System  . . . . . . . . 2-3
           2.2.3     TOPS-20 PA1050 . . . . . . . . . . . . . . . . . 2-3
           2.2.3.1   Versions Of 1022 Later Than 116B . . . . . . . . 2-4
           2.2.3.2   Versions 115A, 115B, 116A, And 116B  . . . . . . 2-5
           2.3     INSTALL FORTRAN  . . . . . . . . . . . . . . . . . 2-7
           2.3.1     TOPS-10 Software House FORTRAN-5 . . . . . . . . 2-9
           2.3.2     TOPS-10 FORTRAN-5  . . . . . . . . . . . . . . . 2-9
           2.3.3     TOPS-10 FORTRAN-6  . . . . . . . . . . . . . .  2-11
           2.3.4     TOPS-10 FORTRAN-7  . . . . . . . . . . . . . .  2-12
           2.3.5     TOPS-10 FORTRAN-10 . . . . . . . . . . . . . .  2-14
           2.3.6     TOPS-10 Modified And Unmodified FOROTS . . . .  2-15
           2.3.7     TOPS-20 Software House FORTRAN-5 . . . . . . .  2-18
           2.3.8     TOPS-20 FORTRAN-5  . . . . . . . . . . . . . .  2-18
           2.3.8.1   TOPS-20 Modified And Unmodified FOROTS . . . .  2-18
           2.3.8.2   TOPS-20 Single Modified FOROTS . . . . . . . .  2-19
           2.3.9     TOPS-20 FORTRAN-6 And Later  . . . . . . . . .  2-21
           2.4     INSTALL COBOL  . . . . . . . . . . . . . . . . .  2-22
           2.4.1     TOPS-10 COBOL Installation . . . . . . . . . .  2-22
           2.4.1.1   Unmodified LIBOL . . . . . . . . . . . . . . .  2-22
           2.4.1.2   Modified COBOL-68 LIBOL  . . . . . . . . . . .  2-23
           2.4.1.2.1 Autopatched COBOL-68 LIBOL . . . . . . . . . .  2-23
           2.4.1.2.2 Non-Autopatched COBOL-68 LIBOL . . . . . . . .  2-25
           2.4.1.3   Modified COBOL-74 LIBOL  . . . . . . . . . . .  2-26
           2.4.1.3.1 Autopatched COBOL-74 LIBOL . . . . . . . . . .  2-26



           2.4.1.3.2 Non-Autopatched COBOL-74 LIBOL . . . . . . . .  2-28
           2.4.1.4   Checking Versions Of COBOL . . . . . . . . . .  2-29
           2.4.2     TOPS-20 COBOL-11 And Earlier Versions  . . . .  2-29
           2.4.3     TOPS-20 COBOL-12   . . . . . . . . . . . . . .  2-30
           2.4.3.1   Unmodified LIBOL . . . . . . . . . . . . . . .  2-30
           2.4.3.2   Modified COBOL-68 LIBOL  . . . . . . . . . . .  2-31
           2.4.3.2.1 Autopatched COBOL-68 LIBOL . . . . . . . . . .  2-31
           2.4.3.2.2 Non-Autopatched COBOL-68 LIBOL . . . . . . . .  2-34
           2.4.3.3   Modified COBOL-74 LIBOL  . . . . . . . . . . .  2-35
           2.4.3.3.1 Autopatched COBOL-74 LIBOL . . . . . . . . . .  2-36
           2.4.3.3.2 Non-Autopatched COBOL-74 LIBOL . . . . . . . .  2-38
           2.4.4     TOPS-20 COBOL-13 . . . . . . . . . . . . . . .  2-39
           2.4.4.1   Unmodified COBLIB  . . . . . . . . . . . . . .  2-40
           2.4.4.2   Modified COBLIB  . . . . . . . . . . . . . . .  2-41
           2.4.5     Checking Versions Of COBOL . . . . . . . . . .  2-43
           2.5     INSTALL MACRO  . . . . . . . . . . . . . . . . .  2-43
           2.6     INSTALL HOST LANGUAGES ON A FORK . . . . . . . .  2-44
           2.7     DESIGNATE DBA  . . . . . . . . . . . . . . . . .  2-45
           2.8     SPECIFY RESIDENT DISK AREA . . . . . . . . . . .  2-45
           2.9     VERIFY CONFIGURATION . . . . . . . . . . . . . .  2-46
           2.10    SET SYSTEM VARIABLE DEFAULTS . . . . . . . . . .  2-46
           2.11    COPY TO SYSTEM AREA  . . . . . . . . . . . . . .  2-46
           2.12    SYSTEM 1022 EXPIRATION DATE  . . . . . . . . . .  2-47


   CHAPTER 3       THE 1022SA PROGRAM

           3.1     COMMAND FORMAT . . . . . . . . . . . . . . . . . . 3-1
           3.2     RESIDE COMMAND . . . . . . . . . . . . . . . . . . 3-1
           3.3     OTS COMMAND  . . . . . . . . . . . . . . . . . . . 3-2
           3.3.1     Purpose  . . . . . . . . . . . . . . . . . . . . 3-2
           3.3.2     Command Format . . . . . . . . . . . . . . . . . 3-2
           3.3.3     Examples . . . . . . . . . . . . . . . . . . . . 3-3
           3.3.4     Operation  . . . . . . . . . . . . . . . . . . . 3-3
           3.3.5     Naming Conventions . . . . . . . . . . . . . . . 3-4
           3.3.6     Restrictions . . . . . . . . . . . . . . . . . . 3-4
           3.4     INFO COMMAND . . . . . . . . . . . . . . . . . . . 3-4
           3.5     DBA COMMAND  . . . . . . . . . . . . . . . . . . . 3-5
           3.5.1     Operation  . . . . . . . . . . . . . . . . . . . 3-5
           3.5.2     Restrictions . . . . . . . . . . . . . . . . . . 3-5
           3.5.3     Command Format . . . . . . . . . . . . . . . . . 3-6
           3.5.3.1   TOPS-20 Sites  . . . . . . . . . . . . . . . . . 3-6
           3.5.3.2   TOPS-10 Sites  . . . . . . . . . . . . . . . . . 3-6
           3.6     1022SA BANNER COMMAND  . . . . . . . . . . . . . . 3-7
           3.7     INFORM DBA COMMAND . . . . . . . . . . . . . . . . 3-7
           3.7.1     Purpose  . . . . . . . . . . . . . . . . . . . . 3-7
           3.7.2     Command Format . . . . . . . . . . . . . . . . . 3-7
           3.8     PATCH COMMAND  . . . . . . . . . . . . . . . . . . 3-8
           3.8.1     Purpose  . . . . . . . . . . . . . . . . . . . . 3-8
           3.8.2     Command Format . . . . . . . . . . . . . . . . . 3-8
           3.9     FIX COMMAND  . . . . . . . . . . . . . . . . . . . 3-8
           3.9.1     Purpose  . . . . . . . . . . . . . . . . . . . . 3-8
           3.9.2     Command Format . . . . . . . . . . . . . . . . . 3-8
           3.10    CHECK COMMAND  . . . . . . . . . . . . . . . . . . 3-9
           3.11    DEFAULT COMMAND  . . . . . . . . . . . . . . . . . 3-9



           3.11.1    Purpose  . . . . . . . . . . . . . . . . . . . . 3-9
           3.11.2    Command Format . . . . . . . . . . . . . . . .  3-10
           3.11.3    Default File . . . . . . . . . . . . . . . . .  3-10
           3.11.4    Common System Variable Defaults  . . . . . . .  3-10
           3.11.4.1  SYSHLNAME  . . . . . . . . . . . . . . . . . .  3-10
           3.11.4.2  SYSWRITE20 . . . . . . . . . . . . . . . . . .  3-11
           3.11.4.3  SYSNOSEGP  . . . . . . . . . . . . . . . . . .  3-11
           3.11.4.4  SYSSCRDEV  . . . . . . . . . . . . . . . . . .  3-12
           3.11.5    Variables For Nonstandard TOPS-10  . . . . . .  3-12
           3.11.5.1  SYSSFDFLAG . . . . . . . . . . . . . . . . . .  3-12
           3.11.5.2  SYSCLOSE2  . . . . . . . . . . . . . . . . . .  3-12
           3.11.5.3  SYSNOFILOP . . . . . . . . . . . . . . . . . .  3-12
           3.11.5.4  SYSNOXCHAN . . . . . . . . . . . . . . . . . .  3-13
           3.11.6    Variables For ENQ Data Sets  . . . . . . . . .  3-13
           3.11.6.1  SYSENQDEF  . . . . . . . . . . . . . . . . . .  3-13
           3.11.6.2  SYSTENQ  . . . . . . . . . . . . . . . . . . .  3-13
           3.11.6.3  SYSDEQFAST . . . . . . . . . . . . . . . . . .  3-13
           3.11.6.4  Interrupts With ENQ  . . . . . . . . . . . . .  3-14
           3.11.6.4.1SYSENQTYPE . . . . . . . . . . . . . . . . . .  3-14
           3.11.6.4.2SYSNOPSI . . . . . . . . . . . . . . . . . . .  3-14
           3.11.6.4.3SYSKEEPPSI . . . . . . . . . . . . . . . . . .  3-15
           3.11.6.5  Summary Of Simultaneous Update Variables . . .  3-15


   CHAPTER 4       INSTALLING SYSTEM 1022 PATCHES

           4.1     INTRODUCTION . . . . . . . . . . . . . . . . . . . 4-1
           4.1.1     Types Of Patchable Files . . . . . . . . . . . . 4-1
           4.1.2     Methods Of Patching  . . . . . . . . . . . . . . 4-2
           4.2     PATCHING PROCEDURES  . . . . . . . . . . . . . . . 4-3
           4.2.1     Applying FIX Patches . . . . . . . . . . . . . . 4-3
           4.2.2     Applying MAKLIB Patches  . . . . . . . . . . . . 4-3
           4.3     OPERATION  . . . . . . . . . . . . . . . . . . . . 4-4
           4.4     EXAMPLES . . . . . . . . . . . . . . . . . . . . . 4-5
           4.4.1     TOPS-10 Example  . . . . . . . . . . . . . . . . 4-6
           4.4.2     TOPS-20 Example  . . . . . . . . . . . . . . . . 4-7
           4.4.3     MAKLIB Patches . . . . . . . . . . . . . . . . . 4-7


   CHAPTER 5       SYSTEM 1022 FOROTS INTERFACE

           5.1     SOFTWARE HOUSE FOROTS-5  . . . . . . . . . . . . . 5-1
           5.2     FOROTS-5 PATCH . . . . . . . . . . . . . . . . . . 5-1
           5.3     PROGRAM OPERATION AND RESTRICTIONS . . . . . . . . 5-2
           5.4     USE OF OVERLAYS AND SORT IN FORTRAN PROGRAMS . . . 5-3


   CHAPTER 6       SYSTEM 1022 LIBOL INTERFACE

           6.1     COBOL 12 UNDER TOPS-20 . . . . . . . . . . . . . . 6-1
           6.1.1     Problems . . . . . . . . . . . . . . . . . . . . 6-1
           6.1.2     Generating An Object Time System . . . . . . . . 6-1



   CHAPTER 7       INTERFACING SYSTEM 1022 TO OTHER HOST LANGUAGES


   CHAPTER 8       BILINGUAL ERROR MESSAGES


   CHAPTER 9       SYSTEM 1022 HELP

           9.1     1022.DMH . . . . . . . . . . . . . . . . . . . . . 9-1
           9.2     CREATING A NEW 1022.DMH FILE . . . . . . . . . . . 9-1
           9.2.1     Modifying HELP22.TXT . . . . . . . . . . . . . . 9-2
           9.2.2     Format . . . . . . . . . . . . . . . . . . . . . 9-3
           9.2.3     Error Messages . . . . . . . . . . . . . . . . . 9-4
           9.2.3.1   Fatal Error Messages . . . . . . . . . . . . . . 9-4
           9.2.3.2   Warning Error Messages . . . . . . . . . . . . . 9-5












                                 CHAPTER 1

                     SYSTEM 1022 INSTALLATION PROCEDURE



   This chapter gives a description  of  the  distribution  tape  and  an
   overview  of  System  1022  installation.  Chapter 2 is a step-by-step
   installation guide.



   1.1  RESTORING THE DISTRIBUTION TAPE TO DISK

|  The System 1022 software and associated files are distributed on  tape
|  to TOPS-10 sites in DUMPER INTERCHANGE format, which can  be  read  by 
|  BACKUP, and to TOPS-20 sites in DUMPER format (FORMAT 4).

   Restore the distributed files from tape  to  your  disk  area  with  a
   procedure  similar to the following.  A directory is included with the
   distribution tape or it can be made  from  the  tape  with  BACKUP  or
   DUMPER.   The RESTORE subcommand must be repeated for each save set on
|  the tape. If you are running TOPS-20 DUMPER version 6.0 or later,  you 
|  can substitute the subcommand TRANSFER *.* for DUMPER RESTORE.

             .R BACKUP           [TOPS-10]

             /TAPE MTA000:
|            /REWIND
             /INTERCHANGE
             /FILES
|            /RESTORE *.*

    or

             @DUMPER             [TOPS-20]

             DUMPER> TAPE (FILESPEC) MTA0:
|            DUMPER> REWIND
             DUMPER> FILES
|            DUMPER> RESTORE (MTA FILES) DSK*:<*>*.* (TO) PS:<directory>


                                   - 1 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-2
   Revision 12


   1.2  RETURNING THE DISTRIBUTION TAPE

   Please return the distribution tape to Software House.  Your returning
   the  tape  helps keep down your annual 1022 maintenance fees.  You may
   want to keep the tape for the current version to make  off-line  files
   easily available.



   1.3  FILE NAMES AND FUNCTIONS

   1.3.1  1022 Images For Resident Disk Area -- TOPS-10

   On TOPS-10 systems, the following files should be placed on  the  disk
   area  for System 1022.  The files 1022.EXE, NS1022.EXE, and 1022SA.EXE
   should be protected 156 (execute only).  The other files in this  list
   should be protected 155 (read only).

   File name      Description
   ---------      -----------

   1022.ERR       System 1022 error messages
   1022.EXE       Initialization segment
   1022.DMH       System 1022 Help messages
|  1022.OKY       Compatibility package for pre-117A key tables
   1022M.EXE      1022/MACRO object time system
   1022SA.EXE     Special program for the Data Base Administrator
   1022T.EXE      1022/FORTRAN object time system
   HL1022.REL     Non-reentrant host language library
   HR1022.REL     Rent host language library
   NS1022.EXE     Single-segment 1022 interactive system for SH debugging
   QA1700.EXE     Other parts of interactive System 1022
   QB1700.EXE
   QC1700.EXE
   QD1700.EXE
|  QG1700.EXE
   QL1700.EXE
   QN1700.EXE
|  QP1700.EXE
   QR1700.EXE
   QS1700.EXE
   QT1700.EXE
   QV1700.EXE
   QX1700.EXE
   T11700.EXE
   T21700.EXE
   T31700.EXE
   TECO22.ERR     Error message file for 1022 TECO command





                                   - 2 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-3
   Revision 12


   1.3.2  1022 Images For Resident Disk Area -- TOPS-20

   On TOPS-20 systems, the following files should be placed on  the  disk
   area  for System 1022.  The files 1022.EXE, NS1022.EXE, and 1022SA.EXE
   should be protected 775212 (execute only).  The other  files  in  this
   list should be protected 775252 (read only).

   File name      Description
   ---------      -----------

   1022.ERR       System 1022 error messages
   1022.EXE       Initialization segment
   1022.DMH       System 1022 Help messages
|  1022.OKY       Compatibility package for pre-117A key tables
   1022D.EXE      1022/COBOL object time system for TOPS-20 sites
   1022M.EXE      1022/MACRO object time system
   1022SA.EXE     Special program for the Data Base Administrator
   1022SF.EXE     1022 object time system for HF1022.REL
   1022T.EXE      1022/FORTRAN object time system
|  1022TX.EXE     1022/FORTRAN object time system for TOPS-20 FORTRAN
|                 version 10 with extended addressing
   1022T6.EXE     1022/F6 for TOPS-20
   HF1022.REL     Reentrant host language library for OTS on a fork
   HL1022.REL     Non-reentrant host language library
   HR1022.REL     Reentrant host language library
   NS1022.EXE     Single-segment 1022 interactive system for SH debugging
   QN1700.EXE     Interactive System 1022 main segment
   QX1700.EXE     SH maintenance routines
   TE1700.EXE     1022 TECO segment
   TECO22.ERR     Error message file for 1022 TECO command



   1.3.3  Maintenance Files

   Software House distributes other files, which are  described  in  this
   manual,  as  well  as  other manuals.  These files need not be kept on
   line.  However, some of them must  be  available  for  Software  House
   personnel when they dial into your system to examine bugs or problems.
   The distribution tape may contain one or more of the following files:

   1022SF.CCL     LINK command file for building 1022SF, the TOPS-20 fork
                  OTS
   9ACSUM.*       Files for sites that have purchased Data Base Access
   ACSUM.*        Accounting.  See ACSUM.MEM and FPRO.EXE
   ACCTS.DMD
   CBLIO.12B      LIBOL source file with 1022 patches for version 12B
   CBLIO.13       COBLIB source file with 1022 patches for version 13
|  CBLIO.C12      Autopatch difference  file  describing  Software  House
|                 patches to CBLIO.MAC (CBLIO.M12) for LIBOL version 12B
   CBLIO.D12      Difference file containing Software  House  patches  to
                  CBLIO.MAC (CBLIO.M12) for LIBOL version 12B

                                   - 3 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-4
   Revision 12


   CBLIO.D13      Difference file containing Software  House  patches  to
                  CBLIO.MAC for COBLIB version 13
|  CBLIO.M12      DEC source file for COBOL 12B
   COBFUN.12B     LIBOL source  file  with  Software  House  patches  for
                  version 12B
   COBFUN.13      COBLIB source  file  with  Software  House  patches  to
                  COBFUN.MAC for version 13
|  COBFUN.C12     Autopatch difference  file  describing  Software  House
|                 patches to COBFUN for version 12B
   COBFUN.D12     Difference file of Software House patches to COBFUN for
                  version 12B
   COBFUN.D13     Difference file of Software House patches to COBFUN.MAC
                  for version 13
|  COBFUN.M12     DEC LIBOL source file for version 12B
   DSCONV.EXE     Program for 1022/1032 DMS conversion
   DSCONV.MEM     File  containing  documentation   for   1022/1032   DMS
                  conversion
   DSCONV.REL     Object file for the DSCONV program
|  ERFCHK.EXE     Utility for formating site-created error message files.
|  F10OT7.CC9     LINK command file for reloading FOROT7  with  Autopatch
|                 tape #9
   F10OT7.CCL     LINK command file for reloading FOROT7

   F10OTS.CCL     LINK command file for reloading FOROT6
   FILEX.EXE      Software House debugging file
   FILEX.SHR      Software House debugging file
   FIXEXE.EXE     Software House debugging file
   FOR22.EXE      Software House FOROTS
   FORFUN.DIF     Difference file of Software House patches to FORFUN
   FORFUN.MAC     Patched FOROTS module  for  FORTRAN-5;   this  file  is
                  explained in Section 5.4.
   FORINI.V6      Patched FORTRAN initialization to  use  FOR226  (FOROT6
                  relocated for 1022)
   FORINI.V7      Patched FORTRAN initialization to  use  FOR227  (FOROT7
                  relocated for 1022)
   FORLIB.MAK     MAKLIB patch to install 1022 patches  in  an  unpatched
                  FORLIB for FORTRAN-5.
   FORLIB.REL     Patched FORLIB for FORTRAN-5
   FPRO.EXE       A program for encrypting and decrypting files for users
                  of 9ACSUM.
   FT22.MAC       A feature test file that is used when  recompiling  the
                  above source files
|  GSEG20.FIX     Patch to 1022 to enable special PA1050 functions.
|  GSEG2P.FIX     Patch to 1022 to enable special PA1050 functions.
   HELP22.EXE     Preprocessor for HELP22.TXT
   HELP22.TXT     File containing 1022 Help text
   KERMIT.DOC     File containing documentation of the KERMIT program
   KERMIT.HLP     Help file for the KERMIT program
|  KEYNDV.FIX     Patch for version 117A and 117B (beta test).
   NOMSG6.FIX     Patches to version  116  COBOL  OTSes  (1022C2.EXE  for
                  TOPS-10  and  1022D.EXE  for  TOPS-20)  to suppress the
                  printing of the  "UNMODIFIED  LIBOL  USED  --  SORT  OR
                  FUNCT.   SHOULD  NOT BE USED" message.  Edit NOMSG6.FIX
                                   - 4 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-5
   Revision 12


                  to change the file name 1022XX to be the name  of  your
                  1022  Cobol  OTS  (such  as 1022C1) before applying the
                  patch.
   NOMSG6.MAK     A MAKLIB patch to version 116  HL1022.REL  to  suppress
                  the  printing  of the "UNMODIFIED LIBOL USED -- SORT OR
                  FUNCT.  SHOULD NOT BE USED" message.
   OPENEX.MAK     Software House patch to COBLIB to allow  "open  extend"
                  in COBOL-13
|  OPNSCR.FIX     Patch for version 117A and 117B (beta test).
|  PA1050.COR     Autopatch difference  file  describing  Software  House
|                 patches  to  DEC's  PA1050 (for versions of the TOPS-20
|                 monitor before 6.1)
|  PA1050.CTL     Control file that uses Autopatch to rebuild PA1050 (for
|                 versions of the TOPS-20 monitor before 6.1)
|  PA1050.DIF     Difference file of the Software House patches to  DEC's
|                 PA1050 (for versions of the TOPS-20 monitor before 6.1)
|  PA1050.EXE     Loaded version  of  PA1050.MAC  (for  versions  of  the
|                 monitor before 6.1)
|  PA1050.MAC     DEC's TOPS-10 compatibility package with Software House
|                 patches  (for  versions  of  the TOPS-20 monitor before
|                 6.1)
|  PA1050.MBS     DEC source file for PA1050 (for versions of the TOPS-20
|                 monitor before 6.1)
|  PAT61.COR      Autopatch difference  file  describing  Software  House
|                 patches to DEC's PA1050 (for version 6.1 of the TOPS-20
|                 monitor and subsequent versions)
|  PAT61.CTL      Control file that uses Autopatch to rebuild PA1050 (for
|                 version  6.1  of  the  TOPS-20  monitor  and subsequent
|                 versions)
|  PAT61.DIF      Difference file of the Software House patches to  DEC's
|                 PA1050  (for  version  6.1  of  the TOPS-20 monitor and
|                 subsequent versions)
|  PAT61.EXE      Loaded version of PAT61.MAC (for  version  6.1  of  the
|                 TOPS-20 monitor and subsequent versions)
|  PAT61.MAC      DEC's TOPS-10 compatibility package with Software House
|                 patches  (for  version  6.1  of the TOPS-20 monitor and
|                 subsequent versions)
|  PAT61.MBS      DEC source file for PA1050  (for  version  6.1  of  the
|                 TOPS-20 monitor and subsequent versions)
   PXGARG.UNV     Universal file  for  users  defining  their  own  XGARG
                  interface
   QSUBFK.REL     A file used by 1022SF.CCL to build 1022SF.EXE
   S1022.MAC      S1022$ macro for 1022/MACRO interface.
   SETEOF.EXE     A TOPS-20 program to set the EOF pointer in ISAM files.
                  Its  use  is  described in the User's Reference Manual,                                                 ______ _________ ______
                  Appendix E, under the explanation of the LD25 error.
   SETORG.EXE     A TOPS-20 program to  set  the  origin  in  COBOL  host
                  language programs.
   SQUEEZ.EXE     A program to remove null records from the last block of
                  DMI  files produced with the CREATE command.  Such null
                  records are produced by ADD  and  CHANGE  in  unbundled
                  data sets.

                                   - 5 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-6
   Revision 12


   10KMIT.*       KERMIT file transfer program to aid  SH,  DEC-10 version.
   20KMIT.*       KERMIT file transfer program to aid  SH  staff,  DEC-20
                  version.



   1.3.4  Documentation Files

   The following documentation files need not be kept on line.

   File name      Description
   ---------      -----------

   1022.BWR       Explains  version  incompatibilities,  outstanding
                  bugs,  and  other  news of special interest to the
                  data base administrator and users
   117B.MEM       New features added to System 1022 for version 117B
   BEWARE.DMC     Report program that  lists  incompatibilities  and
                  solved and outstanding bugs using BEWARE.DMS.
   BEWARE.DMD     Structure and description of BEWARE.DMS.
   BEWARE.DMS     Data set of version incompatibilities  and  solved
                  and outstanding bugs.
   BEWARE.RPT     Report generated from BEWARE.DMS using BEWARE.DMC.
   DBA.MEM        This  document,  the  Data  Base   Administrator's                                        ____  ____   _______________
                  Reference Manual                  _________ ______
   FORMS.MEM      A form to report software problems
   FORTR6.DOC     Documents 1022 FORTRAN-6 interface
|  HCHNG.MEM      Change pages for Revision 5 of the  Host  Language                                                      ____  ________
|                 Interface Manual                  _________ ______
|  HOST.MEM       System  1022  Host   Language   Interface   Manual                                ____   ________   _________   ______
|                 (Revision 5, May 1986)
   INSTAL.EXE     Host language installation guide program
   INSTAL.FOR     Host language installation guide program for sites
                  running nonstandard FORTRAN
   INSTAL.DOC     Host language installation guide program text
|  MANUAL.MEM     System 1022 User's Reference Manual  (Revision  4,                              ______ _________ ______
|                 May 1986)
|  MCHNG.MEM      Change  pages  for  Revision  4  of   the   User's                                                              ______
|                 Reference Manual                  _________ ______
   REPMAN.MEM     System 1022 Report Generator Manual                              ______ _________ ______



   1.3.5  Primer Files

   The following files are demonstration files for users of the  new
   System 1022 Primer and should be installed on PUB:.

   File name      Description
   ---------      -----------

   DIRECT.DMS     Demonstration data set for primer

                                   - 6 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-7
   Revision 12


   FILMS.DMS      Demonstration data set for primer
   FILMS2.DMS     Demonstration data set for primer
   PRM1.DMC       Command file to copy primer data set
   PRM2.DMC       Command file to copy and rename primer data set
   PRM3.DMC       Command file to copy and rename primer data sets

   TOPS-10 sites have a logical device PUB:, and  the  PRIMER  FILES
   save set should be restored to it.

   TOPS-20 administrators  need  to  define  PUB: as  a  system-wide
   logical name associated with an area that contains the files from
   the PRIMER save set.  For example, the command  <CTRL  E>  DEFINE
   PUB: PS:<PUBLIC>  defines  PUB: as the logical device PS: and the
   area <PUBLIC>.  You must have enabled wheel capability to  define
   a  system-wide  logical  device.   Enter  this  definition in the
   system configuration file too.  To do this, edit the file and add
   the  command  DEFINE  PUB:   PS:<PUBLIC>.   Use  the  name of the
   logical device and area that will contain the PRIMER save set  in
   place  of PS:<PUBLIC>.  If your system runs version 4 of TOPS-20,
   the configuration file is SYSTEM:4-CONFIG.CMD.  For version 3A of
   TOPS-20,  that file is named SYSTEM:3A-CONFIG.CMD.  Now PUB: will
   retain its definition for your system until it is changed in this
   file.



   1.3.6  Interactive Report Generator

   The Interactive Report Generator produces  1022  report  programs
   from   an   interactive  dialogue  with  a  terminal  user.   The
   Interactive Report Generator is not supported by Software  House.
   It comprises the following files.

   IRG.EXE
   IRG.MEM
   IRG.FOR
   IRGMAC.MAC



   1.4  OVERVIEW: INSTALLING 1022

   You need not read the following description in order  to  install
   1022.   It  provides  information  explaining  the steps that are
   detailed in the installation guide chapter of this manual.








                                   - 7 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-8
   Revision 12


   1.4.1  Structure Of The 1022 System

   The distribution tape contains a complete  set  of  REL  and  EXE
   files  to  operate  System  1022  on  a "model" DEC-10 and DEC-20
   computer system.  A site that is  identical  to  this  model  can
   operate  1022 by copying the appropriate files from the tape into
   disk area SYS:.  The installation  instructions  give  the  steps
   that  alter these files to fit sites that differ from this model.
   The model may not be typical of most sites;  we have chosen it as
   an  easy  way to structure the system on the tape and as a simple
   base for making modifications during installation.

   We will call the  files  needed  to  run  a  1022  procedure  the
   "program   files."     There   are  many  other  files,  such  as
   documentation files, on the tape.  They  may  be  stored  on  the
   computer system or left on a magtape for recovery when needed.

   The model TOPS-10 or TOPS-20 system has all  1022  program  files
   reside  on  disk  area  SYS:.   Some  program  files invoke other
   program files during operation, and are set to find  those  files
   either  in  a  specific  area or in the same area that a previous
   file  started  execution.   These  rules  allow  more  than   one
   configuration of 1022 to run on the same computer system.

   A "configuration" of 1022 provides interactive use, interfaces to
   FORTRAN  and  COBOL  and  other  host  languages,  and connection
   between  the  host  language  interfaces  and  interactive   1022
   (DBEXEC).   Configurations  may  exist  for different versions of
   1022 (114E, 115A) and may interface with  different  versions  of
   FORTRAN    or    COBOL    (FORTRAN-5,    FORTRAN-6,    COBOL-12B,
   INHOUSE-FORTRAN-X).   Distinct  configurations  may   reside   on
   separate areas or may share files in common.



   1.4.1.1  Model Configuration

   Below is the model configuration for 1022 as distributed  on  the
   tape.   All  files reside in SYS: except those marked as residing
   in ANY: which may be in SYS: or anywhere  else.   These  are  not
   absolute  restrictions;   a  configuration  of  1022 can have the
   files in any area.  A particular configuration requires that most
   files reside in a predetermined place (such as SYS:), while other
   files may be moved around before being used.

   Some files are composed of other files or are  built  from  them.
   Some   information   in  them  will  derive  unchanged  from  the
   information in the files from which they are built.

   The marker PTR> identifies a second file that  is  referenced  by
   the  first.  "PTR>SYS:1022T.EXE" means that the first file points
   to  the  file  1022T.EXE  on  the  area  SYS:.    The   reference

                                   - 8 -
   SYSTEM 1022 INSTALLATION PROCEDURE                            Page 1-9
   Revision 12


   "PTR>OWN:1022.ERR"  means  that  the  first file may look for the
   file 1022.ERR on its "own" area, the one on which the first  file
   resides.   Files  marked OWN: must reside on the same area as the
   first one;  files marked SYS: or any  other  specific  area  name
   must  reside on that area.  This distinction is not needed in the
   model because all files reside on  SYS:,  but  it  indicates  the
   choices that a site has in a particular configuration.

   An "OTS"  is  an  object-time  system,  also  called  a  run-time
   library,  which is called into memory soon after a program starts
   execution.  It is not loaded with the user code, but is  designed
   to  satisfy  the  internal subroutine references and system calls
   that the programming language needs to execute.  We  usually  use
   it  to  mean  a  combined  run-time  library  that  serves a host
   language and System 1022 at the same time.



   1.4.1.2  Interactive 1022

   File 1022.EXE   Starts interactive operation.

     PTR> OWN:     The following files reside with 1022.EXE

        1022.ERR   Error messages during operation.
        1022.DMH   Processed 1022 Help file.
|       1022.OKY   Compatibility package for pre-117A key tables
        QA1700.EXE These are segment overlays for execution of 1022
        QB1700.EXE procedures.  Each locates the others by looking
        . .  .     on the OWN area.
        QX1700.EXE
        T11700.EXE
        . .  .
        TE1700.EXE
        TECO22.ERR Error message file for 1022 TECO command

        Different versions of interactive 1022 may  operate  on  the
        same computer by placing the above files in different areas,
        such as OLD:  and NEW:.  The command "R OLD:1022"  will  run
        one  version  and  "R  NEW:1022"  will  run the other.  Each
        version will remain unconfused  because  it  looks  for  its
        program files on the area where the 1022.EXE file came from.
        The file 1022.EXE can be renamed, for example to  1022N.EXE.
        Then,  the  startup  command  becomes  "R  NEW:1022N".   Any
        renaming may require the use of the RESIDE command in 1022SA
        to keep DBEXEC operating in this configuration.







                                   - 9 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-10
   Revision 12


   1.4.1.3  Host Language System

   We describe FORTRAN in detail.  COBOL and MACRO are similar.


     File HL1022.REL   Resides on  ANY.   Contains  all  subroutines
                       needed  to  execute a program containing 1022
                       DB Calls.  The user program  is  loaded  with
                       this as library.

        PTR> SYS:1022.EXE HL1022 knows the  name  and  area  of  the
                          starting file for interactive 1022.

        HL1022 is different internally in each version of 1022.

        The user loads with HL1022  as  a  subroutine  library  when
        making  a  program  that  need not refer to any special OTS;
        all 1022 code is loaded into the  user's  program  with  the
        user's own code.

        1022SA combines HL1022 with  a  host  language  object  time
        system  (FOROTS)  to form an OTS such as 1022T.  The pointer
        to SYS:  locates the proper 1022.EXE and its  program  files
        in  response  to  a  DBEXEC call from the user program.  The
        RESIDE  command  in  1022SA  changes  this  pointer  when  a
        configuration  has  1022.EXE  on  a  different  area or by a
        different name (for example, 1022N.EXE).

        HL1022 may have any name for use as  a  subroutine  library.
        This  may  be useful in distinguishing different versions of
        HL1022.  It must have the name HL1022 when  1022SA  and  the
        RESIDE command are used to move the installed area for 1022.


     File  HR1022.REL  Resides  on  ANY.   HR1022  is  used   as   a
                       subroutine  library  for  user  programs that
                       will use a shared OTS containing both  FOROTS
                       and  1022 routines.  HR1022 is a minimal link
                       to the routines that are brought into use  at
                       run time in 1022T.EXE.

        PTR> SYS:1022T.EXE OTS called in by DBFOR
|       PTR> SYS:1022TX.EXE OTS called by DBFX
        PTR> SYS:1022D.EXE OTS called in by DBCBL
        PTR> SYS:1022M.EXE OTS called in by DBMAC
        PTR> SYS:[others]  OTS called in by DB<other>

        HR1022 is the same in different versions of 1022.  It  links
        the  user  program  to  an  appropriate  set  of subroutines
        brought in at run time, the OTS 1022T.EXE.  It points to the
        area  and  name of the OTS needed by FORTRAN, as well as the
        ones that may be needed in COBOL, MACRO,  and  some  others.

                                   - 10 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-11
   Revision 12


        Having  many pointers allows a single HR1022 to serve as the
        subroutine library for many host languages.  The OTS that is
        selected  is determined by the initial routine called by the
        user program, in this case  DBFOR  calls  in  SYS:1022T.EXE,
        which is built from FOR22 (a patched FOROTS) and 1022.

        The pointers in HR1022 are modified when 1022SA is  used  to
        make a new OTS from HL1022 and FOR22.  The name and location
        of the new OTS is recorded in the pointer for DBFOR.   Then,
        any  user program loaded with this HR1022 will know where to
        locate the intended object time system.

        In a parallel way,  making  a  new  COBOL  OTS  changes  the
        pointer for DBCBL.

        HR1022 must have the name HR1022 and be present when  a  new
        OTS  is  built,  so  that the pointers are properly updated.
        Thereafter, its name may be changed for convenience, and  it
        may be moved anywhere.



     File 1022T.EXE It usually resides  along  with  1022.EXE.   The
                    specific  requirement  is that it reside where a
                    matching version of HR1022 points to it, so that
                    it  can  be  found when a FORTRAN program starts
                    up.

                    In the distributed system, 1022T is  built  from
                    FOR22.EXE  and  HL1022, using the OTS command in
                    1022SA.

        PTR> SYS:1022.EXE 1022T must locate the  interactive  system
                          in   response  to  a  DBEXEC  call.   This
                          pointer is set by the  RESIDE  command  of
                          1022SA,  or defaults to the pointer in the
                          HL1022 used to build 1022T.EXE.

        1022T is built from FORTRAN-5 FOROTS that has been  modified
        (patched)  to  cooperate  with  1022 in handling devices and
        memory management.  We distribute this patched FOROTS as the
        file FOR22.EXE.

        A site may have its own version of FORTRAN that  is  patched
        and  maintained  on  site.   We  distribute  procedures  for
        modifying a local version of FOROTS to  be  compatible  with
        1022,  making  it  suitable  for being combined with 1022 to
        produce an OTS like 1022T that serves the local FORTRAN.

        All host  languages  go  through  a  similar  process.   The
        run-time  library  for  the  host language is modified to be
        compatible with 1022, then it is loaded into  an  EXE  file.

                                   - 11 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-12
   Revision 12


        The  OTS  command  of  the  1022SA program builds a combined
        run-time library that serves both 1022 and the host language
        routines.  That combined library is associated with a DBxxxx
        call that initializes the user's program.



   1.4.2  Installing Interactive System 1022:  Overview

   Interactive System 1022 is installed  by  reading  files  without
   change  from the distribution tape and placing them onto the area
   SYS:.  The files are identified in Chapter 2.

   You can place these files on any other disk area.  If you use the
   interactive  system  through host language DBEXEC calls, you must
   then run 1022SA to change the associated files to  reference  the
   interactive  system  on that area.  See the 1022SA RESIDE command
   for details.

   Two versions of 1022  within  the  same  major  series,  such  as
   versions  114D  and  114E,  cannot be installed on the same area.
   Many of the program files have  the  same  names  and  cannot  be
   distinguished at run time.



   1.4.3  Installing A Host Language Interface:  Overview

   You will probably want to link one or more  of  your  programming
   languages  (FORTRAN, COBOL, or MACRO) to run with this version of
   1022.  The general procedure is the same for all languages.

   The following overview ignores particulars  that  appear  in  the
   installation  guide  chapter  of  this manual.  The discussion is
   made easier by  using  FORTRAN-5  as  an  example.   We  use  the
   particular  file  names  for FORTRAN-5, but they stand in for the
   same-purpose files that would be present  for  COBOL,  MACRO,  or
   another language.

   The steps for installation are as follows:

        1.  Make the Object Time System compatible with 1022.

        2.  Combine the HL OTS with the 1022 OTS.

        3.  Adjust the Interface of Program to OTS







                                   - 12 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-13
   Revision 12


   1.4.3.1  Make The OTS Compatible With 1022

   The Object Time System  (OTS)  is  a  run-time  library  that  is
   located  and  referenced  when  the  host  language  (HL) program
   starts.  The FORTRAN-5 OTS is FOROTS.EXE and is built  from  many
   source-code  program files that are compiled and loaded.  It must
   be present to supply action routines that the HL program needs to
   execute.

   System 1022 is similar.   It  depends  on  a  subroutine  library
   called HL1022.REL for routines executed at run time.  When HL1022
   is compiled and loaded it can form an OTS for 1022.  A difficulty
   is  that both OTSes must execute at the same time, sharing memory
   and device usage.

   We provide instructions for how to change FOROTS source files  to
   work  compatibly with 1022.  An experienced systems programmer is
   needed to do this in some cases,  but  most  cases  require  only
   following  our directions carefully, possibly with some help from
   Software House staff.

   Most of this work is avoided when you use FOR22.EXE from the 1022
   distribution  tape,  or  when  you use the standard FORTRAN-6 OTS
   called FOROT6.EXE.  FOR22.EXE is a version of the  FORTRAN-5  OTS
   already  modified to be compatible.  FOROT6.EXE can be rebuilt in
   a few steps to be compatible with 1022.



   1.4.3.2  Combine The HL OTS With The 1022 OTS

   A compatible HL OTS, such as FOR22.EXE, or a reloaded  FOROT6.EXE
   can  be  combined  with HL1022.REL to form a single, new OTS that
   will serve HL programs that use 1022.

   The program 1022SA.EXE  distributed  on  the  tape  provides  the
   commands needed to install 1022.  The OTS command of 1022SA takes
   a compatible FOROTS (or other HL OTS) and the resident HL1022.REL
   subroutine  library  and  writes  out  a  combined OTS for use by
   FORTRAN-5 programs using 1022.  Assume the combined OTS is called
   F22 for this discussion.

   F22 is written into your current disk area, although you  usually
   specify  another  disk area in the output specification, the disk
   area where F22  will  be  resident.   1022SA  modifies  the  file
   HR1022.REL  so that user programs later loaded with it as library
   will look in that specified area to find F22.

   You will move F22 to its resident area (using  the  monitor  COPY
   command)  and  will  move the HR1022.REL library to some area for
   use in loading programs.  You may have many  combined  OTSes  and
   many  related  HR1022.REL  versions  that  point to the different

                                   - 13 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-14
   Revision 12


   OTSes (always in pairs).  The language OTS is combined  with  the
   1022 routines at all TOPS-10 sites running any version of FORTRAN
   or COBOL.  At TOPS-20 sites the language OTS and the 1022 OTS are
   separate  for  FORTRAN-6  and  later, and for COBOL-12 and later.
   Otherwise, they are combined.

   You may call each OTS a different name, and each  paired  version
   of  HR1022.REL  (that  points to it) a different name, or you may
   distinguish them by storing them on different  disk  areas.   You
   must  keep  track of the different OTSes and HR1022.RELs that you
   build.  Your program may not operate properly if your version  of
   HR1022 points to an OTS that is built from a different HL version
   (FORTRAN-6 rather than FORTRAN-5), or is different from  the  one
   you intended.



   1.4.3.3  Adjust The Interface Of Program To OTS

   This adjustment depends on the  versions  you  are  running.   It
   needs   some  preliminary  discussion.   There  are  two  central
   decisions:

   (1) You will probably migrate  usage  of  FORTRAN-5  to  the  new
       FORTRAN-6.   Will  you  change  each  1022  HL program to use
       FORTRAN-6 by altering the initial call from  DBFOR  to  DBF6?
       Alternatively,  you may configure HR1022 to use FORTRAN-6 for
       all the initialization calls DBFOR, DBF10, and DBF6.

   (2) You may combine FOROTS (FORTRAN-5) with 1022 to make  an  OTS
       (FOR22)  that  runs alongside your current FOROTS, or you may
       choose to replace your original FOROTS with the combined OTS.
       You  may  combine FOROT6 (FORTRAN-6) with 1022 to make an OTS
       (FOR226) that runs alongside your current FOROT6, or you  may
       choose to replace your original FOROT6 with the combined OTS.



   1.4.3.3.1  Forced Migration To FORTRAN-6

   Decision 1 concerns how you are treating FORTRAN-6.  You may want
   all 1022 programs to use FORTRAN-6 by default, making it the site
   standard, or you may want each program to choose which FORTRAN it
   uses.

   Each program may choose which OTS it is using by  its  choice  of
   1022 initialization routine, DBF10, DBFOR, or the new entry DBF6.
   DBF10 and  DBFOR  are  synonyms  for  using  the  FORTRAN-5  OTS.
   Routine  DBF6  calls  in the FORTRAN-6 OTS.  You must change this
   initialization call when you want to change a program from  using
   FORTRAN-5  to  using  FORTRAN-6.   Failure  to do this will cause
   version skew errors.

                                   - 14 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-15
   Revision 12


   Many sites want to migrate use of FORTRAN-5 to use  of  FORTRAN-6
   without  modifying  the source programs.  We provide installation
   instructions that configure 1022 to coerce  DBF10  and  DBFOR  to
   call  in FORTRAN-6 rather than FORTRAN-5.  This option allows you
   to "automatically" convert all current FORTRAN-5 HL  applications
   to  use  FORTRAN-6.   You  must recompile the user programs under
   FORTRAN-6 and load with the new HR1022.  This is  called  "forced
   migration" in the detailed instructions.



   1.4.3.3.2  Modified And Unmodified Host Languages

   Decision 2 concerns whether you are going to make  your  1022  HL
   OTS   the  standard  run-time  library  (for  either  version  of
   FORTRAN), or whether you will keep both the ordinary OTS and  the
   1022-modified OTS.  Here are some things to think about.

   IN FAVOR OF making the 1022 OTS the only (standard) OTS

        o There are fewer files and configurations to worry about.

        o A single OTS will be shared for better system performance.

   AGAINST making 1022 the only (standard) OTS

        o You can save time by using our already  patched  FORTRAN-5
        OTS,  FOR22.EXE  from  the  distribution tape.  You will not
        want to replace your current FOROTS  with  FOR22  if  it  is
        different.

        o You may already be operating with the previous version  of
        1022  in  a  combined  and  standard OTS.  You don't want to
        replace it with the newest version until you have tested  it
        through use.

        o To  be  cautious,  you  want  your  non-1022  programs  to
        continue  undisturbed,  so you want your original FOROTS OTS
        to remain unmodified.

        o Some special FORTRAN  applications  use  operating  system
        parameters  (such  as .JBCST) and conflict with their use by
        1022.  This might be a  problem  under  FORTRAN-5,  but  not
        FORTRAN-6.   This  is  definitely  not a problem if you have
        never heard of .JBCST.


   We assume that you will run Software House FORTRAN-5 in  parallel
   with  an  existing  FORTRAN-5.   This  is  not  because  we  lack
   confidence in the  interface,  but  many  sites  will  apply  our
   modifications  to their own locally modified copies of FORTRAN-5,
   and they will want the extra assurance that if a mistake is  made

                                   - 15 -
   SYSTEM 1022 INSTALLATION PROCEDURE                           Page 1-16
   Revision 12


   it will not alter the operation of non-1022 programs.  We provide
   instructions for replacing the original FORTRAN-5  OTS  with  the
   1022-modified  OTS  when  the  site  has  confidence  in it.  All
   programs should be compatible with the 1022-modified OTS, whether
   or not they use 1022, and any differences between these OTSes are
   bugs.  Please report them to us.

   We assume that you will run the modified FORTRAN-6  in  place  of
   your  current  FORTRAN-6  OTS.   The  modification  you  make  to
   FORTRAN-6 for TOPS-10  is  to  load  the  OTS  into  a  different
   location  in  memory;   there is no modification of FORTRAN-6 for
   TOPS-20.  Most sites will  take  advantage  of  having  only  one
   FORTRAN-6 OTS.

   Under TOPS-10, reloading the FORTRAN-6 OTS does have one  effect.
   User  programs  are  limited  to  128K  if they use the reentrant
   FORTRAN library FOROT6, even if they do not use  1022.   At  most
   sites,  this  is  not a constraint because large programs can use
   the nonreentrant FORTRAN library.


   The detailed instructions of this manual refer to these decisions
   and   and  provide  step-by-step  procedures  to  implement  your
   choices.





























                                   - 16 -












                                 CHAPTER 2

                       SYSTEM 1022 INSTALLATION GUIDE



   2.1  INTRODUCTION

   The following step-by-step procedure  guides  you  in  installing  the
   System 1022 software.  Chapter 3 describes in more detail the commands
   in this Installation Guide.

   This guide describes the installation of 1022 in eight major sections.
   You  should  follow the instructions of each section in sequence.  The
   major sections are the following:

        1.  Install 1022 Interactive System, Section 2.2

        2.  Install FORTRAN, Section 2.3

        3.  Install COBOL, Section 2.4

        4.  Install MACRO, Section 2.5

        5.  Install Host Languages on a Fork, Section 2.6

        6.  Designate DBA, Section 2.7

        7.  Specify Resident Disk Area, Section 2.8

        8.  Verify Configuration, Section 2.9

        9.  Set System Variable Defaults, Section 2.10

       10.  Copy to System Area, Section 2.11










                                   - 17 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-2
   Revision 12


   2.1.1  Introduction To The INSTAL Program

   The INSTAL program from Software House  is  an  installation  aid  for
   System  1022  host languages.  Restore the files INSTAL.* to your work
   area and give the command:

        .RUN INSTAL

           or           __

        @RUN INSTAL

   Answer the questions asked by the program with numbers  or  upper-case
   text  from the menu.  The program produces the RUNOFF file INSTAL.RNO,
   which contains the parts of this Installation Guide relevant  to  your
   site.  Format INSTAL.RNO with RUNOFF:

        .R RUNOFF (INSTAL.RNO)

           or           __

        @RUNOFF INSTAL.RNO

   This produces the formatted text file INSTAL.MEM, which you can  print
   or  read at your terminal for host language installation instructions.
   The following instructions include everything produced by INSTAL.



   2.2  INSTALL INTERACTIVE 1022 SYSTEM

   To install the interactive 1022 system,  you  copy  the  files  listed
   below  without  change  from  the  distribution tape to the 1022 area,
   usually SYS:.  You will copy these in the final "Copy to System  Area"
   section of this Installation Guide.



   2.2.1  TOPS-10 Interactive 1022 System

   The following files make up interactive 1022 on TOPS-10:

   File name      Description
   ---------      -----------

   1022.ERR       System 1022 error messages
   1022.EXE       Initialization segment
   1022.DMH       Processed 1022 Help file
   NS1022.EXE     Nonsegmented interactive 1022 for Software House
                  debugging
   QA1700.EXE     Other parts of stand-alone System 1022
   QB1700.EXE

                                   - 18 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-3
   Revision 12


   QC1700.EXE
   QD1700.EXE
|  QG1700.EXE
   QL1700.EXE
   QN1700.EXE
   QR1700.EXE
   QS1700.EXE
   QT1700.EXE
   QV1700.EXE
   QX1700.EXE
   T11700.EXE
   T21700.EXE
   T31700.EXE
   TECO22.ERR     Error message file for 1022 TECO command

   If you have not acquired  the  System  1022  Host  Language  Interface
   Option, proceed to Section 2.7, "Designate DBA."



   2.2.2  TOPS-20 Interactive 1022 System

   The following files make up interactive 1022 on TOPS-20:

   File name      Description
   ---------      -----------

   1022.ERR       System 1022 error messages
   1022.EXE       Initialization segment
   1022.DMH       Processed 1022 Help file
   NS1022.EXE     Nonsegmented interactive 1022 for Software House
                  debugging
   QN1700.EXE     Interactive System 1022 main segment
   QX1700.EXE     SH maintenance routines
   TE1700.EXE     1022 TECO segment
   TECO22.ERR     Error message file for 1022 TECO command

   If you have not acquired  the  System  1022  Host  Language  Interface
   Option, proceed to Section 2.7, "Designate DBA."
|  
|  
|  
|  2.2.3  TOPS-20 PA1050
|  
|  PA1050 is the compatibility package  that  simulates  TOPS-10  monitor
|  calls  on  TOPS-20.   As  of  version 117A, it is necessary to install
|  Software House's patches to PA1050 to run host  language  applications
|  that  use  the  GETSEG  call  with 1022.  You may also wish to install
|  these patches for greater efficiency if you are running version  115A,
|  115B,  116A,  or  116B,  though  you need not do so.  The installation
|  procedures differ slightly according to the version of  1022  and  the
|  version of the TOPS-20 monitor that you are running.

                                   - 19 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-4
   Revision 12


|  2.2.3.1  Versions Of 1022 Later Than 116B
|  
|  If you are running a version of 1022 later  than  116B  and  you  have
|  already autopatched your PA1050, then
|  
|       1.  Restore the appropriate set of files for the version  of  the
|           TOPS-20  monitor  that  you are running from the distribution
|           tape to the Autopatch "Utilities" patch area (PAT:):
|  
|               Pre-Version 6.1        Version 6.1 or Later                ___________ ___        _______ ___ __ _____
|  
|               PA1050.COR             PAT61.COR
|  
|               PA1050.CTL             PAT61.CTL
|  
|               PA1050.MAC             PAT61.MAC
|  
|               PA1050.MBS             PAT61.MBS
|  
|  
|       2.  If the version of the TOPS-20 monitor that you are running is
|           earlier than version 6.1, issue the following command:
|  
|               SUBMIT PA1050.CTL/TIME:1:00:00
|  
|           If you are running version 6.1 of the TOPS-20  monitor  or  a
|           later version, issue the following command instead:
|  
|               SUBMIT PAT61.CTL/TIME:1:00:00
|  
|           Note that, in either case, the  control  file  will  not  run
|           properly unless you have WHEEL or OPERATOR privileges.
|  
|       3.  When the job is done,  check  the  log  file  (PA1050.LOG  or
|           PAT61.LOG)  and,  if  the job has executed successfully, copy
|           the   resulting   file   from   the   Autopatch   "Utilities"
|           installation area (INS:) back to SYS:  with the command
|  
|               COPY INS:PA1050.EXE SYS:PA1050.EXE
|  
|  
|       4.  If you are running version 117A and any of your  applications
|           uses the GETSEG monitor call, continue with steps 4-6.  These
|           are optional if none of your  applications  uses  the  GETSEG
|           call.
|  
|           Copy the 1022 EXE files to your patch area with the command






                                   - 20 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-5
   Revision 12


|               COPY 1022*.EXE *.EXE
|  
|  
|       5.  Run 1022SA and apply the  patch  GSEG20.FIX  with  the  PATCH
|           command.   If  you  have  renamed  your  FORTRAN-5 OTS (which
|           Software House distributes as 1022T.EXE) or  your  COBOL  OTS
|           (which  Software House distributes as 1022D.EXE), use the FIX
|           command to patch these explicitly.
|  
|       6.  Copy the patched 1022  EXE  files  back  to  SYS:   with  the
|           command
|  
|               COPY 1022*.EXE SYS:*.EXE
|  
|  
|  
|  If you are running a version of 1022 later than 116B and you have  not                                                                      ___
|  autopatched, then
|  
|       1.  If you are running a version of the TOPS-20  monitor  earlier
|           than  6.1,  apply  the  changes  in PA1050.DIF to your PA1050
|           source (PAT.MAC).  If you are  running  version  6.1  of  the
|           TOPS-20  monitor  or  a  later  version, apply the changes in
|           PAT61.DIF to your PA1050 source (PAT.MAC).
|  
|       2.  Using PAT.CTL  from  the  DEC  distribution  tape,  load  the
|           patched  PAT.MAC.   This  will produce the file PA1050.EXE in
|           your connected directory.
|  
|       3.  Copy PA1050.EXE to SYS:  with the command
|  
|               COPY PA1050.EXE SYS:PA1050.EXE
|  
|  
|       4.  If you are running version 117A and any of your  applications
|           uses  the  GETSEG monitor call, apply the GSEG20.FIX patch by
|           following  steps  (4)-(6)  given  above.   These  steps   are
|           optional if none of your applications uses the GETSEG monitor
|           call.
|  
|  
|  
|  
|  2.2.3.2  Versions 115A, 115B, 116A, And 116B
|  
|  If you are running version 115A, 115B, 116A, or 116B and you  wish  to
|  install  the  Software  House  patches  to PA1050 and you have already
|  autopatched your PA1050, then





                                   - 21 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-6
   Revision 12


|       1.  Restore the the appropriate files  for  the  version  of  the
|           TOPS-20  monitor  that  you are running from the distribution
|           tape to the Autopatch "Utilities" patch area (PAT:):
|  
|               Pre-Version 6.1        Version 6.1 or Later                ___________ ___        _______ ___ __ _____
|  
|               PA1050.COR             PAT61.COR
|  
|               PA1050.CTL             PAT61.CTL
|  
|               PA1050.MAC             PAT61.MAC
|  
|               PA1050.MBS             PAT61.MBS
|  
|  
|       2.  If the version of the TOPS-20 monitor that you are running is
|           earlier than version 6.1, issue the command:
|  
|               SUBMIT PA1050.CTL/TIME:1:00:00
|  
|           If you are running version 6.1 of the TOPS-20  monitor  or  a
|           later version, issue the following command instead:
|  
|               SUBMIT PAT61.CTL/TIME:1:00:00
|  
|           Note that, in either case, the  control  file  will  not  run
|           properly unless you have WHEEL or OPERATOR privileges.
|  
|       3.  When the job is done,  check  the  log  file  (PA1050.LOG  or
|           PAT61.LOG)  and,  if  the job has executed successfully, copy
|           the   resulting   file   from   the   Autopatch   "Utilities"
|           installation area (INS:) back to SYS:  with the command
|  
|               COPY INS:PA1050.EXE SYS:PA1050.EXE
|  
|  
|       4.  If you are running version 115B, 116A, or  116B  and  any  of
|           your applications uses the GETSEG monitor call, or if you are
|           running 115A, continue with steps 4-7.  If  you  are  running
|           version  115B,  116A,  or  116B and none of your applications
|           uses the GETSEG monitor call, these steps are optional.
|  
|           Copy the 1022 EXE files to your patch area with the command
|  
|               COPY 1022*.EXE *.EXE
|  
|  
|       5.  Run 1022SA and apply the  patch  GSEG2P.FIX  with  the  PATCH
|           command.   If  you  have  renamed  your FORTRAN-5 OTS or your
|           COBOL OTS, use the FIX command to patch these explicitly.



                                   - 22 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-7
   Revision 12


|       6.  Apply the patch GSEG20.FIX with the PATCH  command.   If  you
|           have  renamed your FORTRAN OTS or your COBOL OTS, use the FIX
|           command to patch these explicitly.
|  
|       7.  Copy the patched 1022  EXE  files  back  to  SYS:   with  the
|           command
|  
|               COPY 1022*.EXE SYS:*.EXE
|  
|  
|  
|  If you are running version 115A, 115B, 116A, or 116B and you have  not                                                                      ___
|  autopatched, then
|  
|       1.  If you are running a version of the TOPS-20  monitor  earlier
|           than  6.1,  apply  the  changes  in PA1050.DIF to your PA1050
|           source (PAT.MAC).  If you are  running  version  6.1  of  the
|           TOPS-20  monitor  or  a  later  version, apply the changes in
|           PAT61.DIF to your PA1050 source (PAT.MAC).
|  
|       2.  Using PAT.CTL  from  the  DEC  distribution  tape,  load  the
|           patched  PAT.MAC.   This  will produce the file PA1050.EXE in
|           your connected directory.
|  
|       3.  Copy PA1050.EXE to SYS:  with the command
|  
|               COPY PA1050.EXE SYS:PA1050.EXE
|  
|  
|       4.  If you are running version 115B, 116A, or  116B  and  any  of
|           your applications uses the GETSEG monitor call, or if you are
|           running  version  115A,  then  apply   the   GSEF2P.FIX   and
|           GSEG20.FIX  patches  by  following steps (4)-(7) given above.
|           If you are running version 115B, 116A, or 116B  and  none  of
|           your  applications  uses the GETSEG monitor call, these steps
|           are optional.
|  



   2.3  INSTALL FORTRAN

   This section describes the installation of 1022 and  FORTRAN.   System
   1022 interfaces to FORTRAN in the following ways:

        1.  Software House FORTRAN-5

        2.  Your own version of FORTRAN-5





                                   - 23 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-8
   Revision 12


        3.  FORTRAN-6

        4.  FORTRAN-7

        5.  FORTRAN-10

        6.  Parallel versions of FORTRAN:  (1) your standard "unmodified"
            FORTRAN  for  non-1022  programs,  and  (2) a FORTRAN that is
            "modified" for use with 1022.

   The following list directs you to detailed procedures  for  installing
   your choice of configuration.

|  
|       1.  TOPS-10 Software House FORTRAN-5, section 2.3.1
|  
|       2.  TOPS-10 your site's FORTRAN-5, section 2.3.2
|  
|       3.  TOPS-10 FORTRAN-6, section 2.3.3
|  
|       4.  TOPS-10 FORTRAN-7, section 2.3.4
|  
|       5.  TOPS-10 FORTRAN-10, section 2.3.5
|  
|       6.  TOPS-10 parallel modified and  unmodified  FORTRANs,  section
|           2.3.6
|  
|       7.  TOPS-20 Software House FORTRAN-5, section 2.3.7
|  
|       8.  TOPS-20 your site's FORTRAN-5, section 2.3.8
|  
|       9.  TOPS-20 FORTRAN-6 and later, section 2.3.9
|  

   Installing FORTRAN requires the following:

        1.  Rebuild FOROTS, the FORTRAN object time system.

        2.  Build 1022T, the FORTRAN object time  system  plus  the  1022
            object time system.

        3.  Rename any files as required.


|  If you are installing a new version of 1022 with the same  version  of
|  FORTRAN  that  you  have been using with the previous version of 1022,
|  and no changes have been made in the current FORFUN,  you  should  not
|  need  to rebuild FOROTS.  You need only build 1022T and copy it to the
|  system.




                                   - 24 -
   SYSTEM 1022 INSTALLATION GUIDE                                Page 2-9
   Revision 12


   2.3.1  TOPS-10 Software House FORTRAN-5

   If you want to use Software House FORTRAN-5, the appropriate FOROTS is
   on  the  1022  distribution  tape.   Software  House  FOROTS is called
   FOR22.EXE and the 1022/FORTRAN object time system is called 1022T.EXE.
   FOR22.EXE  is  DEC  FOROTS  version  5A(721),  patched for 1022 memory
   management as described in Chapter 4.  Software House  FORTRAN-5  does
   not  include FORTRAN SORT.  If your programs require this feature, you
   should use your own FOROTS.

   If you want your 1022/FORTRAN programs  to  use  only  Software  House
   FOROTS-5,  the system comes properly set up for your site.  Choose one
   of the two following procedures to match your site.



   2.3.2  TOPS-10 FORTRAN-5

   You may wish to interface 1022 to a particular  version  of  FORTRAN-5
   FOROTS  that  is maintained at your site.  You must modify your FOROTS
|  to use 1022 memory management.  Use the following procedure, of  which
|  the  first  five  steps  may  be  omitted  when you install subsequent
|  versions of 1022:

   (1)  Restore the files FOROTS.REL  and  FORFUN.MAC  from  the  FORTRAN
        distribution tape to your work area.

   (2)  Use the FILCOM  program  to  compare  and  list  the  differences
        between  your  FORFUN.MAC  and  the  1022  FORFUN.MAC.  A systems
        programmer can modify your  FORFUN.MAC  to  reflect  the  changes
        required for 1022 use.

   (3)  Compile the files to produce FORFUN.REL:

        .COMPILE/COMP FT22.MAC + FORFUN.MAC

   (4)  Use FORLIB.REL from the 1022 distribution  tape  (which  reflects
        the   modifications   in   FORFUN.MAC  and  FORLIB.MAK  to  allow
        overlays).
                                     or                                     __
        Use the MAKLIB  program  to  modify  your  FORLIB.REL.   It  will
        replace  the  old  FORFUN  file  with the new, install the FOROTS
        patch, and re-index FORLIB:

        .R MAKLIB

        *FORLIB=SYS:FORLIB/MASTER:FORFUN,FORFUN/REPLACE:FORFUN
        *FORLIB=FORLIB,FORLIB.MAK/FIX
        *FOROTS=FOROTS,FORLIB.MAK/FIX
        *FORLIB=FORLIB/INDEX



                                   - 25 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-10
   Revision 12


   (5)  Now combine these REL files to  produce  the  high  segment  1022
        FOROTS, named FOR22:

        .R LINK

        */NOSYM FOROTS,FORLIB/SEA/GO

        .SSAVE FOR22

   (6)  Build a 1022/FORTRAN OTS that incorporates FOR22 (FOROTS  patched
        for 1022).

        .RUN 1022SA

        *OTS 1022T.EXE=FOR22.EXE/FOR

        The OTS command requires approximately 60K of user core  for  its
        execution.  You must arrange a sufficient physical core limit for
        the job.

   (7)  The necessary files you now have are FOR22.EXE,  FORLIB.REL,  and
        1022T.EXE.

        Placing FOR22.EXE onto your system area gives you two versions of
        the   FORTRAN-5  OTS,  FOR22  being  the  version  that  is  1022
        compatible.  FOR22 is also compatible with programs that  do  not
        use  1022,  so  it can serve as the single FORTRAN-5 OTS.  If you
        want both FOR22 and FOROTS, issue the following commands:

        COPY SYS:FOR22.EXE = FOR22.EXE
        COPY SYS:FORLIB.REL = FORLIB.REL
        COPY SYS:1022T.EXE = 1022T.EXE

        If you only want a single FOROTS, issue  the  following  commands
        instead:

        COPY SYS:FOROTS.EXE = FOR22.EXE
        COPY SYS:FORLIB.REL = FORLIB.REL
        COPY SYS:1022T.EXE = 1022T.EXE

   (8)  If you have chosen to replace your original FOROTS with FOR22, in
        step  (7),  you must modify HR1022 and HL1022 so they do not look
        for FOR22, as follows:

        .R MAKLIB

        *HL1022.REL=HL1022.REL/DELETE:FORINI
        *HR1022.REL=HR1022.REL/DELETE:FORINI

   You have now installed Version 5  of  FORTRAN.   You  can  proceed  to
   install other FORTRANs or COBOL.


                                   - 26 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-11
   Revision 12


   2.3.3  TOPS-10 FORTRAN-6

   To use FORTRAN-6 with  1022,  set  up  a  FORTRAN-6  high  segment  by
   reloading  FOROT6.EXE.   If someone at your site has modified FORTRAN,
   you should refer  this  procedure  to  him  or  her,  along  with  the
   information from the file FORTR6.DOC.

   The following procedure sets up a FOROT6+1022 OTS  in  place  of  your
   site's current OTS.  Read the section "TOPS-10 Modified and Unmodified
|  FOROTS" if you want a parallel installation of FORTRAN and  1022.   If
|  you  have  already reloaded your FOROT6 and have not autopatched, skip
|  to step (3), omitting steps (1) and (2).

   The procedure to set up a new FOROT6 for 1022 is:

   (1)  Restore *.RLS and  FORHAK.REL  from  the  FORTRAN-6  distribution
        tape, and F10OTS.CCL from the 1022 tape to a work area.

   (2)  Load the new FOROTS.

        .R LINK
        *@F10OTS
        EXIT

        .RUN FOROT6
        .SSAVE FOROT6
        .GET FOROT6
        .SSAVE FOROT6

        The sequence "RUN/SSAVE/GET/SSAVE" is required.  This  FOROT6.EXE
        file replaces the one distributed by DEC.  The only difference is
        in the location of the impure storage in the high segment.

   (3)  Generate 1022T6 (FOROT6 OTS  plus  1022  OTS)  using  the  1022SA
        program:

        .RUN 1022SA
        *OTS 1022T6.EXE=FOROT6.EXE/F6

   (4)  The necessary files you now have are FOROT6.EXE and 1022T6.EXE.

   (5)  You may want to force the migration of all current FORTRAN-5 host
        language  applications  to use FORTRAN-6.  To do this, modify the
        distributed HL1022.REL and HR1022.REL files, as follows:

        .R MAKLIB

        *HL1022=HL1022/DELETE:QF10
        *HR1022=HR1022/DELETE:QF10L

        The change deletes the usual initialization subroutine  in  favor
        of  an  alternate.  It has the effect of making calls to DBF10 or

                                   - 27 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-12
   Revision 12


        DBFOR equivalent to DBF6 when programs  are  loaded  with  either
        HL1022  or  HR1022.   The FORTRAN program must be recompiled with
        FORTRAN-6 or version skews will result.

   (6)  The necessary library files  you  now  have  are  HL1022.REL  and
        HR1022.REL.

   When you include step (5) above, all FORTRAN HL applications that  are
   loaded  with  those  HL1022  and  HR1022  files  will  use  FORTRAN-6,
   regardless of the particular initialization (DBFOR, DBF10, DBF6)  that
   they use.

   You may use this configuration for all current applications by placing
   these versions of HL/HR1022 on SYS:.

   You may easily keep dual sets  of  HL/HR1022.   At  step  (5),  before
   deleting  QF10 and QF10L, copy HL/HR1022 to OLD:, then do step (5) and
   install those versions on SYS:.  The versions on OLD:  will  bring  in
   the  FORTRAN-5 OTS when DBFOR or DBF10 is used as initialization call,
   or will use the FORTRAN-6 OTS when DBF6 is used.  Of course, you  must
   have  installed  a  FORTRAN-5 with 1022 for this to work;  see Section
   2.3.2.

   You have now installed FORTRAN-6.  You can proceed  to  install  other
   FORTRANs or COBOL.



   2.3.4  TOPS-10 FORTRAN-7

   To use FORTRAN-7 with  1022,  set  up  a  FORTRAN-7  high  segment  by
   reloading  FOROT7.EXE.   If someone at your site has modified FORTRAN,
   you should refer this procedure to him or her.

   The following procedure sets up a FOROT7+1022 OTS  in  place  of  your
   site's current OTS.  Read the section "TOPS-10 Modified and Unmodified
|  FOROTS" if you want a parallel installation of FORTRAN and  1022.   If
|  you  have  already reloaded your FOROT7 and have not autopatched, skip
|  to step (3), omitting steps (1) and (2).

   The procedure to set up a new FOROT7 for 1022 is:

   (1)  Restore *.RLS and  FORHAK.REL  from  the  FORTRAN-7  distribution
|       tape,  and  F10OT7.CCL from the 1022 tape to a work area.  If you
|       have autopatched with  Autopatch  tape  #9,  you  should  restore
|       F10OT7.CC9  from  the  1022  tape  instead of F10OT7.CCL, and you
|       should use F10OT7.CC9 in the following LINK command.
|  
|  (2)  Load the new FOROTS.
|  
|       .R LINK           or            .R LINK
|       *@F10OT7                        *@F10OT7.CC9

                                   - 28 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-13
   Revision 12


|       EXIT                             EXIT

   (3)  Generate 1022T7 (FOROT7 OTS  plus  1022  OTS)  using  the  1022SA
        program:

        .RUN 1022SA
        *OTS 1022T7.EXE=FOROT7.EXE/F6

   (4)  The necessary files you now have are FOROT7.EXE and 1022T7.EXE.

   (5)  You may want to force the migration of all current FORTRAN-5 host
        language  applications  to use FORTRAN-7.  To do this, modify the
        distributed HL1022.REL and HR1022.REL files, as follows:

        .R MAKLIB

        *HL1022=HL1022/DELETE:QF10
        *HR1022=HR1022/DELETE:QF10L

        The change deletes the usual initialization subroutine  in  favor
        of  an  alternate.  It has the effect of making calls to DBF10 or
        DBFOR equivalent to DBF6 when programs  are  loaded  with  either
        HL1022  or  HR1022.   The FORTRAN program must be recompiled with
        FORTRAN-7 or version skews will result.

   (6)  The necessary library files  you  now  have  are  HL1022.REL  and
        HR1022.REL.

   When you include step (5) above, all FORTRAN HL applications that  are
   loaded  with  those  HL1022  and  HR1022  files  will  use  FORTRAN-7,
   regardless of the particular initialization (DBFOR, DBF10, DBF6)  that
   they use.

   You may use this configuration for all current applications by placing
   these versions of HL/HR1022 on SYS:.

   You may easily keep dual sets  of  HL/HR1022.   At  step  (5),  before
   deleting  QF10 and QF10L, copy HL/HR1022 to OLD:, then do step (5) and
   install those versions on SYS:.  The versions on OLD:  will  bring  in
   the  FORTRAN-5 OTS when DBFOR or DBF10 is used as initialization call,
   or will use the FORTRAN-7 OTS when DBF6 is used.  Of course, you  must
   have  installed  a  FORTRAN-5 with 1022 for this to work;  see Section
   2.3.4.

   You have now installed FORTRAN-7.  You can proceed  to  install  other
   FORTRANs or COBOL.







                                   - 29 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-14
   Revision 12


|  2.3.5  TOPS-10 FORTRAN-10
|  
|  To use FORTRAN-10 with 1022, set  up  a  FORTRAN-10  high  segment  by
|  reloading  FOROT0.EXE.   If someone at your site has modified FORTRAN,
|  you should refer this procedure to him or her.
|  
|  The following procedure sets up a FOROT0+1022 OTS  in  place  of  your
|  site's current OTS.  Read the section "TOPS-10 Modified and Unmodified
|  FOROTS" if you want a parallel installation of FORTRAN and  1022.   If
|  your  FORTRAN-10 programs do not use any pages above page 600, skip to
|  step (3), omitting steps (1) and (2).
|  
|  The procedure to set up a new FOROT0 for 1022 is:
|  
|  (1)  Restore *.RLS and FORHAK.REL  from  the  FORTRAN-10  distribution
|       tape, and F10OT0.CCL from the 1022 tape to a work area.
|  
|  (2)  Load the new FOROTS.
|  
|       .R LINK
|       *@F10OT0
|       EXIT
|  
|  (3)  Generate 1022T0 (FOROT0 OTS  plus  1022  OTS)  using  the  1022SA
|       program:
|  
|       .RUN 1022SA
|       *OTS 1022T0.EXE=FOROT0.EXE/F6
|  
|  (4)  The necessary files you now have are FOROT0.EXE and 1022T0.EXE.
|  
|  (5)  You may want to force the migration of all current FORTRAN-5 host
|       language  applications to use FORTRAN-10.  To do this, modify the
|       distributed HL1022.REL and HR1022.REL files, as follows:
|  
|       .R MAKLIB
|  
|       *HL1022=HL1022/DELETE:QF10
|       *HR1022=HR1022/DELETE:QF10L
|  
|       The change deletes the usual initialization subroutine  in  favor
|       of  an  alternate.  It has the effect of making calls to DBF10 or
|       DBFOR equivalent to DBF6 when programs  are  loaded  with  either
|       HL1022  or  HR1022.   The FORTRAN program must be recompiled with
|       FORTRAN-10 or version skews will result.
|  
|  (6)  The necessary library files  you  now  have  are  HL1022.REL  and
|       HR1022.REL.
|  
|  When you include step (5) above, all FORTRAN HL applications that  are
|  loaded  with  those  HL1022  and  HR1022  files  will  use FORTRAN-10,
|  regardless of the particular initialization (DBFOR, DBF10, DBF6)  that

                                   - 30 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-15
   Revision 12


|  they use.
|  
|  You may use this configuration for all current applications by placing
|  these versions of HL/HR1022 on SYS:.
|  
|  You may easily keep dual sets  of  HL/HR1022.   At  step  (5),  before
|  deleting  QF10 and QF10L, copy HL/HR1022 to OLD:, then do step (5) and
|  install those versions on SYS:.  The versions on OLD:  will  bring  in
|  the  FORTRAN-5 OTS when DBFOR or DBF10 is used as initialization call,
|  or will use the FORTRAN-10 OTS when DBF6 is used.  Of course, you must
|  have  installed  a  FORTRAN-5 with 1022 for this to work;  see Section
|  2.3.4.
|  
|  You have now installed FORTRAN-10.  You can proceed to  install  other
|  FORTRANs or COBOL.



   2.3.6  TOPS-10 Modified And Unmodified FOROTS

   You may wish to run two versions of FOROTS,  one  that  has  not  been
   modified for 1022 use as well as the modified 1022 FOROTS.

   If you wish to run a modified and an unmodified FOROTS-5  or  earlier,
   use the following two-step procedure:

   (1)  Build and install the  modified  FOROTS-5  as  in  steps  1-7  of
        Section 2.3.2.

   (2)  The necessary files  you  now  have  are  FOR22.EXE,  FORLIB.REL,
        1022T.EXE.   The  modified FORTRAN is FOR22 and the unmodified is
        FOROTS.

   If you wish to run a modified and unmodified FORTRAN-6  OTS,  use  the
   following procedure:

   (1)  Build and install the modified FORTRAN-6 OTS as in steps  1-6  of
        Section 2.3.3.

   (2)  Rename the modified FOROT6 as FOR226:

        .RENAME FOR226.EXE=FOROT6.EXE

        The necessary files you now have are FOR226.EXE and 1022T6.EXE.

   (3)  Restore the file FORINI.V6 from the 1022 distribution tape.  This
        file  causes FOR226.EXE to be used as the FORTRAN OTS rather than
        FOROT6.EXE.

   (4)  Compile this file:

        .COMPILE/COMP FORINI.V6/MAC

                                   - 31 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-16
   Revision 12


   (5)  Modify HL1022 and HR1022 to include FORINI:

        .R MAKLIB
        *HL1022=HL1022,FORINI/APPEND
        *HR1022=HR1022,FORINI/APPEND

   (6)  The necessary files you now have are HL1022.REL and HR1022.REL.

   (7)  Leave the unmodified FOROT6 named FOROT6.

   If you wish to run a modified and unmodified FORTRAN-7  OTS,  use  the
   following procedure:

   (1)  Build and install the modified FORTRAN-7 OTS as in steps  1-6  of
        Section 2.3.4.

   (2)  Rename the modified FOROT7 as FOR227:

        .RENAME FOR227.EXE=FOROT7.EXE

        The necessary files you now have are FOR227.EXE and 1022T7.EXE.

   (3)  Restore the file FORINI.V7 from the 1022 distribution tape.  This
        file  causes FOR227.EXE to be used as the FORTRAN OTS rather than
        FOROT7.EXE.

        Placing FOR227.EXE onto your system area gives you  two  versions
        of  the  FORTRAN-7  OTS,  FOR227  being  the version that is 1022
        compatible.  FOR227 is also compatible with programs that do  not
        use  1022,  so  it can serve as the single FORTRAN-7 OTS.  If you
        want both FOR227 and FOROT7, issue the following commands:

        COPY SYS:FOR227.EXE = FOR227.EXE
        COPY SYS:1022T7.EXE = 1022T7.EXE

   (4)  Compile this file:

        .COMPILE/COMP FORINI.V7/MAC

        When you then reload FORINI.V7, make sure that you load with the
        FORPRM.REL that is used in building FORTRAN-7's FORLIB.REL, and
        not the
        FORPRM.REL that is used in building FOROT7.

   (5)  Modify HL1022 and HR1022 to include FORINI:

        .R MAKLIB
        *HL1022=HL1022,FORINI/APPEND
        *HR1022=HR1022,FORINI/APPEND

   (6)  The necessary files you now have are HL1022.REL and HR1022.REL.


                                   - 32 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-17
   Revision 12


   (7)  Leave the unmodified FOROT7 named FOROT7.

|  If you wish to run a modified and unmodified FORTRAN-10 OTS,  use  the
|  following procedure:
|  
|  (1)  Build and install the modified FORTRAN-10 OTS as in steps 1-6  of
|       Section 2.3.5.
|  
|  (2)  Rename the modified FOROT0 as FOR220:
|  
|       .RENAME FOR220.EXE=FOROT0.EXE
|  
|       The necessary files you now have are FOR220.EXE and 1022T0.EXE.
|  
|  (3)  Restore the file FORINI.V10  from  the  1022  distribution  tape.
|       This  file causes FOR220.EXE to be used as the FORTRAN OTS rather
|       than FOROT0.EXE.
|  
|  (4)  Restore the files FORPRM.UNV, MTHPRM.UNV, and FORLIB.REL from the
|       FORTRAN-10 distribution tape to your work area.
|  
|  (5)  Compile this file:
|  
|       .COMPILE/COMP FORINI.V10/MAC
|  
|       When you then reload FORINI.V10, make sure that you load with the
|       FORPRM.REL  that is used in building FORTRAN-10's FORLIB.REL, and
|       not the FORPRM.REL that is used in building FOROT0.
|  
|  (6)  Modify HL1022, HR1022, and FORLIB.REL.
|  
|       .R MAKLIB
|       *HL1022=HL1022/DELETE:FORN22
|       *HR1022=HR1022/DELETE:FORN22
|       *FORLIB=FORLIB/MASTER:FORNON,FORINI/INSERT:FORG22
|  
|  (8)  The necessary files you now have are HL1022.REL, HR1022.REL,  and
|       FORLIB.REL.
|  
|  (7)  Leave the unmodified FOROT0 named FOROT0.
|  
|  You have now installed your versions of FORTRAN.  You can  proceed  to
|  install COBOL.










                                   - 33 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-18
   Revision 12


   2.3.7  TOPS-20 Software House FORTRAN-5

   If you want to use Software House FORTRAN-5, the appropriate FOROTS is
   on  the  1022  distribution  tape.   Software House FORTRAN-5 does not
   include FORTRAN SORT.  If your  programs  require  this  feature,  you
   should  use  your  own  FORTRAN.   Software  House  FOROTS  is  called
   FOR22.EXE and the 1022/FORTRAN object time system is called 1022T.EXE.
   FOR22.EXE  is  DEC  FOROTS  version  5A(721),  patched for 1022 memory
   management as described in Chapter 5:

   The necessary file is FOR22.EXE.

   You can delete the FOR22A file:

        @DELETE (FILES) FOR22A.EXE

   You have now installed Software House FORTRAN-5.  You can  proceed  to
   install other FORTRANs or COBOL.



   2.3.8  TOPS-20 FORTRAN-5

   You may wish to interface 1022 to a particular  version  of  FORTRAN-5
   FOROTS  that  is maintained at your site.  You must modify your FOROTS
|  to use 1022 memory management.  You may install 1022 with  a  modified
|  FOROTS  by  following  either  of the two sets of procedures described
|  below.  Which set you follow depends on whether you wish  to  run  two
|  versions  of  FOROTS (one of which has been modified for use with 1022
|  and the other of which has not) or a single (modified)  version.   The
|  single  version  is compatible with programs that do not use 1022, but
|  it does not contain FORTRAN SORT.
|  
|  
|  
|  2.3.8.1  TOPS-20 Modified And Unmodified FOROTS
|  
|  If you plan to run both a modified and an unmodified  FOROTS  at  your
|  site,  use the following eight-step procedure, of which the first five
|  steps may be omitted when you install subsequent versions of 1022:
|  
|  (1)  Restore the files FOROTS.REL  and  FORFUN.MAC  from  the  FORTRAN
|       distribution tape to your work area.
|  
|  (2)  Use the FILCOM  program  to  compare  and  list  the  differences
|       between  your  FORFUN.MAC  and  the  1022  FORFUN.MAC.  A systems
|       programmer can modify your  FORFUN.MAC  to  reflect  the  changes
|       required for 1022 use.
|  
|  (3)  Compile the files to produce FORFUN.REL:
|  
|       @COMPILE/COMP FT22.MAC + FORFUN.MAC

                                   - 34 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-19
   Revision 12


|  (4)  Use the MAKLIB program to replace the old FORFUN  file  with  the
|       new, to install the FOROTS patch, and to re-index FORLIB:
|  
|       @MAKLIB
|  
|       *FORLIB=SYS:FORLIB/MASTER:FORFUN,FORFUN/REPLACE:FORFUN
|       *FORLIB=FORLIB,FORLIB.MAK/FIX
|       *FOROTS=FOROTS,FORLIB.MAK/FIX
|       *FORLIB=FORLIB/INDEX
|  
|  (5)  Now combine these REL files to  produce  the  high  segment  1022
|       FOROTS, named FOR22:
|  
|       @LINK
|  
|       */NOSYM FOROTS,FORLIB/SEA/GO
|  
|       @SAVE FOR22
|  
|  (6)  Build a 1022/FORTRAN  OTS  that  incorporates  your  new  patched
|       FOROTS.
|  
|       @RUN 1022SA
|  
|       *OTS 1022T.EXE=FOR22.EXE/FOR
|  
|  (7)  The necessary files you now have are FOR22.EXE,  FORLIB.REL,  and
|       1022T.EXE.
|  
|       (8)  Placing FOR22.EXE  onto  your  system  area  gives  you  two
|       versions  of  the  FORTRAN-5 OTS, FOR22 being the version that is
|       1022 compatible.  Now, issue the following commands:
|  
|       @COPY FOR22.EXE SYS:FOR22.EXE
|       @COPY FORLIB.REL SYS:FORLIB.REL
|       @COPY 1022T.EXE SYS:1022T.EXE
|  
|  You have now installed Version 5  of  FORTRAN.   You  can  proceed  to
|  install other FORTRANs or COBOL.
|  
|  
|  
|  2.3.8.2  TOPS-20 Single Modified FOROTS
|  
|  If you wish to run a single modified FOROTS  at  your  site,  use  the
|  following  nine-step  procedure,  of which the first five steps may be
|  omitted when you install subsequent versions of 1022:
|  
|  (1)  Restore the files FOROTS.REL  and  FORFUN.MAC  from  the  FORTRAN
|       distribution tape to your work area.
|  
|  (2)  Use the FILCOM  program  to  compare  and  list  the  differences

                                   - 35 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-20
   Revision 12


|       between  your  FORFUN.MAC  and  the  1022  FORFUN.MAC.  A systems
|       programmer can modify your  FORFUN.MAC  to  reflect  the  changes
|       required for 1022 use.
|  
|  (3)  Compile the files to produce FORFUN.REL:
|  
|       @COMPILE/COMP FT22.MAC + FORFUN.MAC
|  
|  (4)  Use the MAKLIB program to replace the old FORFUN  file  with  the
|       new, to install the FOROTS patch, and to re-index FORLIB:
|  
|       @MAKLIB
|  
|       *FORLIB=SYS:FORLIB/MASTER:FORFUN,FORFUN/REPLACE:FORFUN
|       *FORLIB=FORLIB,FORLIB.MAK/FIX
|       *FOROTS=FOROTS,FORLIB.MAK/FIX
|       *FORLIB=FORLIB/INDEX
|  
|  (5)  Now combine these REL files to  produce  the  high  segment  1022
|       FOROTS, named FOR22:
|  
|       @LINK
|  
|       */NOSYM FOROTS,FORLIB/SEA/GO
|  
|       @SAVE FOR22
|  
|  (6)  Build a 1022/FORTRAN  OTS  that  incorporates  your  new  patched
|       FOROTS.
|  
|       @RUN 1022SA
|  
|       *OTS 1022T.EXE=FOR22.EXE/FOR
|  
|  (7)  The necessary files you now have are FOR22.EXE,  FORLIB.REL,  and
|       1022T.EXE.
|  
|       (8)  Now, issue the following commands:
|  
|       @COPY FOR22.EXE SYS:FOROTS.EXE
|       @COPY FORLIB.REL SYS:FORLIB.REL
|       @COPY 1022T.EXE SYS:1022T.EXE
|  
|  (9)  Since you have chosen to replace your original FOROTS with FOR22,
|       in  step  (8),  you  must modify HR1022 and HL1022 so it does not
|       look for FOR22, as follows:
|  
|       @MAKLIB
|  
|       *HL1022.REL=HL1022.REL/DELETE:FORINI
|       *HR1022.REL=HR1022.REL/DELETE:FORINI


                                   - 36 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-21
   Revision 12


|  You have now installed Version 5  of  FORTRAN.   You  can  proceed  to
|  install other FORTRANs or COBOL.
|  
|  
|  
|  2.3.9  TOPS-20 FORTRAN-6 And Later
|  
|  Under TOPS-20, the FOROTS in versions of FORTRAN later than  FORTRAN-5
|  runs with a separate 1022 sharable segment.  The FOROTS distributed by
|  DEC in versions of FORTRAN later than FORTRAN-5 starts at page 527, so
|  that  a  1022 sharable segment starting at page 400 can fit underneath
|  it.  If your site has relocated your  FOROTS,  consult  the  technical
|  people  involved.   Otherwise,  all  you  need  do  is set up the 1022
|  run-time system (1022T6) as follows:
|  
|  (1)  Create the OTS:
|  
|       @RUN 1022SA
|  
|       *OTS 1022T6.EXE=/ORG:400/F6
|  
|  (2)  The necessary file you now have is 1022T6.EXE.
|  
|  (3)  You may want to force the migration of all current FORTRAN-5 host
|       language  applications to use the version of FORTRAN that you are
|       installing.  To do this, modify the  distributed  HL1022.REL  and
|       HR1022.REL files, as follows:
|  
|            @MAKLIB
|  
|            *HL1022=HL1022/DELETE:QF10
|            *HR1022=HR1022/DELETE:QF10L
|  
|       The change deletes the usual initialization subroutine  in  favor
|       of  an  alternate.  It has the effect of making calls to DBF10 or
|       DBFOR equivalent to DBF6 when programs  are  loaded  with  either
|       HL1022 or HR1022.
|  
|  (4)  The necessary library files  you  now  have  are  HL1022.REL  and
|       HR1022.REL.
|  
|  When you include step (3) above, all FORTRAN HL applications that  are
|  loaded  with  those  HL1022  and  HR1022 files will use the version of
|  FORTRAN that you have just installed,  regardless  of  the  particular
|  initialization (DBFOR, DBF10, DBF6) that they use.
|  
|  You may use this configuration for all current applications by placing
|  these versions of HL/HR1022 on SYS:.
|  
|  You may easily keep dual sets  of  HL/HR1022.   At  step  (3),  before
|  deleting  QF10 and QF10L, copy HL/HR1022 to OLD:, then do step (3) and
|  install those versions on SYS:.  The versions on OLD:  will  bring  in

                                   - 37 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-22
   Revision 12


|  the  FORTRAN-5 OTS when DBFOR or DBF10 is used as initialization call,
|  or will use the OTS of the version  of  FORTRAN  that  you  have  just
|  installed  when  DBF6  is  used.  Of course, you must have installed a
|  FORTRAN-5 with 1022 for this to work;  see Section 2.3.7.
|  
|  You have now installed a version of FORTRAN later than FORTRAN-5.  You
   can proceed to install other FORTRANs or COBOL.



   2.4  INSTALL COBOL

   This section describes the installation of 1022 and COBOL.   First  it
   gives  the  procedure for patching the LIBOL for each version of COBOL
   you run on TOPS-10.  Then it gives the 1022SA  commands  to  associate
   each  COBOL  with  its  initialization call (DBCBL, DBC68, and DBC74).
   Then this section gives similar procedures for running Software  House
   LIBOL or patching the LIBOL for each version you run on TOPS-20.



   2.4.1  TOPS-10 COBOL Installation

   You can install 1022 with a  modified  or  an  unmodified  LIBOL.   No
   modified  LIBOL  is  distributed for TOPS-10 because special libraries
   such as SORT, MCS, and DBMS-10 are required by many sites  but  cannot
   be distributed by Software House.

   Software House distributes modifications to LIBOL (the  patches  CBLIO
   and  COBFUN)  that are needed if any COBOL programs that use 1022 also
   use overlays, use the SORT verb in COBOL, TRAFFIC, or ever  split  the
   top  level  index  of a COBOL ISAM file.  If you modify LIBOL, the new
   version of LIBOL becomes the standard LIBOL, even for programs that do
   not use 1022.

   System 1022 allows multiple COBOL  versions  to  be  run.   The  COBOL
   object  time  system  is  read  in  on the initialization calls DBCBL,
   DBC68, and DBC74.



   2.4.1.1  Unmodified LIBOL

   Running 1022 with an unmodified LIBOL will produce 1022 error messages
   warning  about  the  unmodified  LIBOL.   You can suppress these error
   messages, but in that case you will not receive a clear warning if you
   try  to use overlays, the COBOL SORT, or a split top level index of an
   ISAM file.   To  install  1022  with  an  unmodified  LIBOL,  use  the
   following three-step procedure:

   (1)  Create the  OTS  and  associate  it  with  the  appropriate  host
        language  call  with the 1022SA OTS command.  The file named with

                                   - 38 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-23
   Revision 12


        "/CBL" is the default COBOL called by DBCBL.   In  the  following
        example LIBO12 becomes the default.  It can be called with DBC68.
        DBC74 calls C74O12.  For example:

        .RUN 1022SA
        *OTS 1022C2.EXE=LIBO12.EXE/CBL
        *OTS 1022C8.EXE=LIBO12.EXE/C68
        *OTS 1022C4.EXE=C74O12.EXE/C74

   (2)  The necessary file you now have is 1022Cn.EXE,  where  n  is  the
        number from the OTS file you have just created.

   (3)  Since you are not installing the Software House patches to LIBOL,
        you  may  want  to turn off the "unmodified LIBOL" error messages
        that will  be  generated  by  DBCBL  calls.   Use  the  following
        commands to suppress those error messages:

        .RUN 1022SA
        *FIX <OTSname> USING NOMSG6
        *QUIT

        .R MAKLIB
        *HL1022.REL=HL1022.REL,NOMSG6.MAK/FIX



   2.4.1.2  Modified COBOL-68 LIBOL

|  You may install 1022 with  a  modified  COBOL-68  LIBOL  by  following
|  either  of  the two sets of procedures described below.  Which set you
|  follow depends on whether or not you use DEC's Autopatch utilities.
|  
|  
|  
|  
|  2.4.1.2.1  Autopatched COBOL-68 LIBOL
|  
|  If  you  are  using  DEC's  Autopatch  utilities,  use  the  following
|  nine-step  procedure each time that you autopatch to install 1022 with
|  a modified COBOL-68 LIBOL:
|  
|      (1)  Use the DEC Autopatch utilities to  patch  your  COBOL.   You
|           should  be  logged into the main autopatching directory, PAT:
|           (default DSKP:[7,6]).
|  
|      (2)  Confirm that the following files are on disk:
|  
|               DIS:CBLIO.MAC





                                   - 39 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-24
   Revision 12


|               DIS:COBFUN.MAC
|  
|               PAT:LIBOL.REL
|  
|               PAT:LIBSHR.REL
|  
|               PAT:*.UNV
|  
|  
|      (3)  Restore  the  following  files  to  PAT:    from   the   1022
|           distribution tape:
|  
|               CBLIO.12B
|  
|               CBLIO.C12
|  
|               CBLIO.M12
|  
|               COBFUN.12B
|  
|               COBFUN.C12
|  
|               COBFUN.M12
|  
|               F22.MAC
|  
|  
|      (4)  Issue the following command:
|  
|               .SUBMIT LIBOL.CT1/TAG:C68/TIME:1:00:00
|  
|  
|      (5)  When the job has finished, type out  the  file  LIBOL.LOG  to
|           confirm that the job completed successfully.
|  
|      (6)  Assuming that the job completed successfully, your new  LIBOL
|           is INS:LIBO12.EXE.  Copy this file to SYS:LIBO12.EXE.
|  
|      (7)  Log out of the autopatch directory and  log  into  your  main
|           directory.
|  
|      (8)  Create the OTS and associate it  with  the  appropriate  host
|           language  call  with  the 1022SA OTS command.  The file named
|           with "/CBL" is the default COBOL called  by  DBCBL.   In  the
|           following  example  LIBO12  becomes  the  default.  It can be
|           called with DBC68.  DBC74 calls C74O12.  For example:
|  
|               .RUN 1022SA





                                   - 40 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-25
   Revision 12


|               *OTS 1022C2.EXE=LIBO12.EXE/CBL
|  
|               *OTS 1022C8.EXE=LIBO12.EXE/C68
|  
|               *OTS 1022C4.EXE=C74O12.EXE/C74
|  
|  
|      (9)  The necessary OTS that you now have is 1022Cn.EXE.
|  
|  
|  
|  
|  2.4.1.2.2  Non-Autopatched COBOL-68 LIBOL
|  
   To install 1022 with a modified  COBOL-68  LIBOL,  use  the  following
|  eight-step procedure, of which the first six steps may be omitted when
|  you install subsequent versions of 1022 if there have been no  changes
|  in the current CBLIO or COBFUN and you have not autopatched:

   (1)  Restore the following files from  the  COBOL  distribution  tape:
        LIBOL.REL, LIBSHR.REL, *.UNV to a work area.

   (2)  For  COBOL  12B  use  CBLIO.12B  and  COBFUN.12B  from  the  1022
        distribution tape rather than from the COBOL tape.

   (3)  For versions other than 12B or if you have  been  applying  DEC's
        patches  to LIBOL, use the FILCOM program to compare and list the
        differences between your CBLIO.MAC and the  1022  CBLIO.12B,  and
        between  your  COBFUN.MAC  and  the  1022  COBFUN.12B.  A systems
        programmer should modify your CBLIO and  COBFUN  to  reflect  the
        changes required for 1022 use.

   (4)  Compile the files to produce CBLIO.REL and COBFUN.REL:

        .COMPILE FT22.MAC+CBLIO.12B/MAC
        .COMPILE FT22.MAC+COBFUN.12B/MAC

   (5)  Use the MAKLIB program to replace the old CBLIO and COBFUN  files
        with the new and to re-index LIBOL:

        .R MAKLIB

        *LIBOL=LIBOL/MASTER:COBFUN,COBFUN/REPLACE:COBFUN
        *LIBOL=LIBOL/MASTER:CBLIO,CBLIO/REPLACE:CBLIO
        *LIBOL=LIBOL/INDEX
        ^C

   (6)  Load the LIBOL and save it with the appropriate name.

        .R LINK
        *LIBSHR,LIBOL/SEARCH/GO


                                   - 41 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-26
   Revision 12


        .SSAVE LIBO12

   (7)  Create the  OTS  and  associate  it  with  the  appropriate  host
        language  call  with the 1022SA OTS command.  The file named with
        "/CBL" is the default COBOL called by DBCBL.   In  the  following
        example LIBO12 becomes the default.  It can be called with DBC68.
        DBC74 calls C74O12.  For example:

        .RUN 1022SA
        *OTS 1022C2.EXE=LIBO12.EXE/CBL
        *OTS 1022C8.EXE=LIBO12.EXE/C68
        *OTS 1022C4.EXE=C74O12.EXE/C74

   (8)  The necessary OTS that you now have is 1022Cn.EXE.




   2.4.1.3  Modified COBOL-74 LIBOL

|  You may install 1022 with  a  modified  COBOL-74  LIBOL  by  following
|  either  of  the two sets of procedures described below.  Which set you
|  follow depends on whether or not you use DEC's Autopatch utilities.
|  
|  
|  
|  
|  2.4.1.3.1  Autopatched COBOL-74 LIBOL
|  
|  If  you  are  using  DEC's  Autopatch  utilities,  use  the  following
|  nine-step  procedure each time that you autopatch to install 1022 with
|  a modified COBOL-74 LIBOL:
|  
|      (1)  Use the DEC Autopatch utilities to  patch  your  COBOL.   You
|           should  be  logged into the main autopatching directory, PAT:
|           (default DSKP:[7,6]).
|  
|      (2)  Confirm that the following files are on disk:
|  
|               DIS:CBLIO.MAC
|  
|               DIS:COBFUN.MAC
|  
|               PAT:C74LIB.REL
|  
|               PAT:C74SHR.REL
|  
|               PAT:*.UNV
|  




                                   - 42 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-27
   Revision 12


|      (3)  Restore  the  following  files  to  PAT:    from   the   1022
|           distribution tape:
|  
|               CBLIO.12B
|  
|               CBLIO.C12
|  
|               CBLIO.M12
|  
|               COBFUN.12B
|  
|               COBFUN.C12
|  
|               COBFUN.M12
|  
|               F22.MAC
|  
|  
|      (4)  Issue the following command:
|  
|               .SUBMIT LIBOL.CT1/TAG:C74/TIME:1:00:00
|  
|  
|      (5)  When the job has finished, type out  the  file  LIBOL.LOG  to
|           confirm that the job completed successfully.
|  
|      (6)  Assuming that the job completed successfully, your new  LIBOL
|           is INS:C74O12.EXE.  Copy this file to SYS:C74O12.EXE.
|  
|      (7)  Log out of the autopatch directory and  log  into  your  main
|           directory.
|  
|      (8)  Create the OTS and associate it  with  the  appropriate  host
|           language  call  with  the 1022SA OTS command.  The file named
|           with "/CBL" is the default COBOL called  by  DBCBL.   In  the
|           following  example  LIBO12  becomes  the  default.  It can be
|           called with DBC68.  DBC74 calls C74O12.  For example:
|  
|               .RUN 1022SA
|  
|               *OTS 1022C2.EXE=LIBO12.EXE/CBL
|  
|               *OTS 1022C8.EXE=LIBO12.EXE/C68
|  
|               *OTS 1022C4.EXE=C74O12.EXE/C74
|  
|  
|      (9)  The necessary OTS that you now have is 1022Cn.EXE.
|  




                                   - 43 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-28
   Revision 12


|  2.4.1.3.2  Non-Autopatched COBOL-74 LIBOL
|  
   To install 1022 with a modified  COBOL-74  LIBOL,  use  the  following
|  eight step procedure, of which the first six steps may be omitted when
|  you install subsequent versions of 1022 if there have been no  changes
|  in the current CBLIO or COBFUN and you have not autopatched:

   (1)  Restore the following files  from  the  COBOL  distribution  tape
        (COBOL-74  saveset):   C74LIB.REL,  C74SHR.REL,  *.UNV  to a work
        area.

   (2)  For  COBOL  12B  use  CBLIO.12B  and  COBFUN.12B  from  the  1022
        distribution tape rather than from the COBOL tape.

   (3)  For versions other than 12B or if you have  been  applying  DEC's
        patches to C74LIB, use the FILCOM program to compare and list the
        differences between your CBLIO.MAC and the  1022  CBLIO.12B,  and
        between  your  COBFUN.MAC  and  the  1022  COBFUN.12B.  A systems
        programmer should modify your CBLIO and  COBFUN  to  reflect  the
        changes required for 1022 use.

   (4)  Compile the files to produce CBLIO.REL and COBFUN.REL:

        .COMPILE FT22.MAC+CBLIO.12B/MAC
        .COMPILE FT22.MAC+COBFUN.12B/MAC

   (5)  Use the MAKLIB program to replace the old CBLIO and COBFUN  files
        with the new and to re-index C74LIB:

        .R MAKLIB

        *C74LIB=C74LIB/MASTER:COBFUN,COBFUN/REPLACE:COBFUN
        *C74LIB=C74LIB/MASTER:CBLIO,CBLIO/REPLACE:CBLIO
        *C74LIB=C74LIB/INDEX
        ^C

   (6)  Load the C74LIB and save the COBOL with the name C74O12.

        .R LINK
        *C74SHR,C74LIB/SEARCH/GO

        .SSAVE C74O12

   (7)  Create the  OTS  and  associate  it  with  the  appropriate  host
        language  call  with the 1022SA OTS command.  The file named with
        "/CBL" is the default COBOL called by DBCBL.   In  the  following
        example LIBO12 becomes the default.  It can be called with DBC68.
        DBC74 calls C74O12.  For example:

        .RUN 1022SA
        *OTS 1022C2.EXE=LIBO12.EXE/CBL
        *OTS 1022C8.EXE=LIBO12.EXE/C68

                                   - 44 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-29
   Revision 12


        *OTS 1022C4.EXE=C74O12.EXE/C74

   (8)  The necessary OTS that you now have is 1022Cn.EXE.



   2.4.1.4  Checking Versions Of COBOL

   You can repeat this process of COBOL installation for each version  of
   COBOL  you  wish  to  run  with  1022.   And you can install different
   versions or make a different version the default on different  devices
   (SYS:, NEW:, OLD:).

   You can check that the versions of COBOL are properly  installed  with
   the 1022SA INFO command:

        .RUN 1022SA

        *INFO HR1022.REL

   Press <RETURN> at  each  prompt.   This  will  list  the  COBOL  files
   installed with 1022.

   You have now installed COBOL.  You can proceed to install MACRO.



   2.4.2  TOPS-20 COBOL-11 And Earlier Versions

   To use COBOL-11 and earlier versions of COBOL with 1022, create an OTS
   using your LIBO11.EXE (COBOL-68) or C74O11.EXE (COBOL-74).

   (1)  Create the  OTS  and  associate  it  with  the  appropriate  host
        language call with the 1022SA OTS command.

        @RUN 1022SA
        *OTS 1022C1.EXE=LIBO11.EXE/CBL

                      or                      __

        *OTS 1022C1.EXE=C74O11.EXE/CBL

   (2)  The necessary OTS that you now have is 1022Cn.EXE.

   You have now installed COBOL.  You can proceed to install MACRO.








                                   - 45 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-30
   Revision 12


   2.4.3  TOPS-20 COBOL-12

   You can install 1022 with a modified or an unmodified LIBOL.

   Software House distributes modifications to LIBOL (the  patches  CBLIO
   and  COBFUN)  that are needed if any COBOL programs that use 1022 also
   use overlays, use the SORT verb in COBOL, TRAFFIC, or ever  split  the
   top  level  index  of a COBOL ISAM file.  If you modify LIBOL, the new
   version of LIBOL becomes the standard LIBOL, even for programs that do
   not use 1022.

   Under TOPS-20, LIBO12.EXE and C74O12.EXE are separate  from  the  1022
   OTS.   The  LIBOL OTS is determined by the version of COBOL with which
   the program is compiled.  The same 1022 OTS (1022D) is used regardless
   of  whether  the  program  is compiled with COBOL-68 or COBOL-74.  All
   programs can call DBCBL;  DBC68 and DBC74 calls are not necessary.



   2.4.3.1  Unmodified LIBOL

   Running 1022 with an unmodified LIBOL will produce 1022 error messages
   warning  about  the  unmodified  LIBOL.   You can suppress these error
   messages, but in that case you will not receive a clear warning if you
   try  to use overlays, the COBOL SORT, or a split top level index of an
   ISAM file.  To install 1022 COBOL with an unmodified  LIBOL,  use  the
   following one-step procedure:

   Prior to version 115, the COBOL run-time system was called  1022R  and
   began  at  page 530.  In later versions, the run-time system was moved
   down to page 512 and renamed  1022C  to  avoid  confusion  with  older
   programs.  In version 116B, the run-time system has been renamed 1022D
   and has been moved to begin at page 500.   To  change  existing  COBOL
   programs  to  use  the  new  1022D rather than 1022R or 1022C, you may
   reload the programs with the new HR system, or you may use the  SETORG
   program to patch them directly.

   Note that COBOL programs loaded under pre-116B versions of System 1022
   must  either  be  reloaded with 116B or must be modified by the SETORG
   program if they are  to  run  under  version  116B  without  producing
   illegal memory references or other error messages.

   A copy of 1022D is provided on the distribution tape.   If,  for  some
   reason, you need to set up another one, the procedure is:

        @RUN 1022SA

        *OTS 1022D.EXE=/ORG:500/CBL

   (1)  Since you are not installing the Software House patches to LIBOL,
        you  will  probably want to turn off the "unmodified LIBOL" error
        messages  that  will  be  generated  by  DBCBL  calls.   Use  the

                                   - 46 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-31
   Revision 12


        following commands to suppress those error messages:

        @RUN 1022SA
        *FIX <OTSname> USING NOMSG6
        *QUIT

        @MAKLIB
        *HL1022.REL=HL1022.REL,NOMSG6.MAK/FIX

   The SETORG program has two commands and two subcommands:

        @RUN SETORG

        SETORG>PATCH filespec,...,filespec,  where the filespec names the
                                             files  to  be modified.  The
                                             default extension is EXE.

         >>ORG  origin                       where  the  origin  is   the
                                             HR1022  origin.  The default
                                             is  512,   but   should   be
                                             entered   here   as  500  to
                                             ensure  compatibility   with
                                             version 116B.

         >>NAME filename                     where the  filename  is  the
                                             1022   high   segment.   The
                                             default is 1022C, but as  of
                                             version   116B,   the   user
                                             should explicitly  give  the
                                             filename as 1022D.

         SETORG> QUIT                        where QUIT exits SETORG.



   2.4.3.2  Modified COBOL-68 LIBOL

|  You may install 1022 with  a  modified  COBOL-68  LIBOL  by  following
|  either  of  the two sets of procedures described below.  Which set you
|  follow depends on whether or not you use DEC's Autopatch utilities.
|  
|  
|  
|  
|  2.4.3.2.1  Autopatched COBOL-68 LIBOL
|  
|  If  you  are  using  DEC's  Autopatch  utilities,  use  the  following
|  eight-step procedure each time that you autopatch to install 1022 with
|  a modified COBOL-68 LIBOL:
|  
|  (1)  Use the DEC Autopatch utilities to patch  your  COBOL.   If  your
|  main    autopatching    directory,    PAT:,   is   not   the   default

                                   - 47 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-32
   Revision 12


|  (AP20:<AUTOPATCH>),  define  PAT:   as  whatever  your  main  patching
|  directory is in your LOGIN.CMD and BATCH.CMD files before proceeding.
|  
|  (2)  Confirm that the following files are on disk:
|  
|           DIS:CBLIO.MAC
|  
|           DIS:COBFUN.MAC
|  
|           PAT:LIBOL.REL
|  
|           PAT:LIBSHR.REL
|  
|           PAT:*.UNV
|  
|  
|  (3)  Restore the following files to PAT:  from the  1022  distribution
|  tape:
|  
|           CBLIO.12B
|  
|           CBLIO.C12
|  
|           CBLIO.M12
|  
|           COBFUN.12B
|  
|           COBFUN.C12
|  
|           COBFUN.M12
|  
|           F22.MAC
|  
|  
|  (4)  Issue the following command:
|  
|           @SUBMIT LIBOL.CT2/TAG:C68/TIME:1:00:00
|  
|  
|  (5)  When the job has finished, type out the file LIBOL.LOG to confirm
|  that the job completed successfully.
|  
|  (6)  Assuming that the job completed successfully, your new  LIBOL  is
|  INS:LIBO12.EXE.  Copy this file to SYS:LIBO12.EXE.
|  
|  (7)  Create the object time system.
|  
|  Prior to version 115, the COBOL runtime system was called  1022R,  and
|  began  at page 530.  In version 115, the runtime system was moved down
|  to page 512, and renamed 1022C to avoid confusion with older programs.
|  In  version  116B,  the  runtime system has been renamed 1022D and has
|  been moved to begin at page 500.  To change existing COBOL programs to

                                   - 48 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-33
   Revision 12


|  use  the  new  1022D  rather  than  1022R or 1022C, you may reload the
|  programs with the new HR system, or you may use the program SETORG.EXE
|  to patch them directly.
|  
|  COBOL programs loaded under pre-116B  versions  of  System  1022  must
|  either be reloaded with 116B or must be modified by the SETORG program
|  if they are to run under version 116B without producing illegal memory
|  references or error messages.
|  
|  The SETORG program has two commands and two subcommands:
|  
|  @RUN SETORG
|  
|       SETORG>PATCH filespec,...,filespec,  where the filespec names the
|                                            files  to  be modified.  The
|                                            default extension is EXE.
|  
|        >>ORG  origin                       where  the  origin  is   the
|                                            HR1022  origin.  The default
|                                            is  512,   but   should   be
|                                            entered   here   as  500  to
|                                            ensure  compatibility   with
|                                            version 116B.
|  
|        >>NAME filename                     where the  filename  is  the
|                                            1022   high   segment.   The
|                                            default is 1022C, but as  of
|                                            version   116B,   the   user
|                                            should explicitly  give  the
|                                            filename as 1022D.
|  
|        SETORG> QUIT                        where QUIT exits SETORG.
|  
|       A copy of 1022D.EXE is provided on the distribution tape and  may
|       be used to create the OTS.  Alternatively, you may create the OTS
|       with the following commands:
|  
|       @RUN 1022SA
|  
|       *OTS 1022D.EXE=/ORG:500/CBL
|  
|  (8)  The necessary files you now have are 1022D.EXE and LIBO12.EXE.











                                   - 49 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-34
   Revision 12


|  2.4.3.2.2  Non-Autopatched COBOL-68 LIBOL
|  
   To install 1022 with a modified LIBOL, use  the  following  eight-step
|  procedure,  of  which  the  first  six  steps  may be omitted when you
|  install subsequent versions of 1022 if there have been no  changes  to
|  the current CBLIO or COBFUN and if you have not autopatched:

   (1)  Restore the following files from  the  COBOL  distribution  tape:
        LIBOL.REL,  LIBSHR.REL,  CBLIO.MAC,  COBFUN.MAC,  *.UNV to a work
        area.

   (2)  For  COBOL  12B  use  CBLIO.12B  and  COBFUN.12B  from  the  1022
        distribution tape rather than from the COBOL tape.

   (3)  For versions other than 12B, use the FILCOM  program  to  compare
        and  list  the  differences  between  your CBLIO.MAC and the 1022
        CBLIO.12B, and between your COBFUN.MAC and the  1022  COBFUN.12B.
        A  systems  programmer  should  modify  your  CBLIO and COBFUN to
        reflect the changes required for 1022 use.

   (4)  Compile the files to produce CBLIO.REL and COBFUN.REL:

        @COMPILE FT22.MAC+CBLIO.12B/MAC
        @COMPILE FT22.MAC+COBFUN.12B/MAC

   (5)  Use the MAKLIB program to replace the old CBLIO and COBFUN  files
        with the new and to re-index LIBOL:

        @MAKLIB

        *LIBOL=LIBOL/MASTER:COBFUN,COBFUN/REPLACE:COBFUN
        *LIBOL=LIBOL/MASTER:CBLIO,CBLIO/REPLACE:CBLIO
        *LIBOL=LIBOL/INDEX
        ^C

   (6)  Load the LIBOL and save it with the appropriate name.

        @LINK
        */NOSYM LIBSHR,LIBOL/SEARCH/GO

        @SAVE LIBO12

   (7)  Create the object time system.

        Prior to version 115, the COBOL run-time system was called 1022R,
        and  began  at page 530.  In version 115, the run-time system was
        moved down to page 512, and renamed 1022C to avoid confusion with
        older  programs.   In  version 116B, the run-time system has been
        renamed 1022D and has been moved to begin at page 500.  To change
        existing COBOL programs to use the new 1022D rather than 1022R or
        1022C, you may reload the programs with the new HR system, or you
        may use the program SETORG.EXE to patch them directly.

                                   - 50 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-35
   Revision 12


        COBOL programs loaded under pre-116B versions of System 1022 must
        either  be  reloaded  with 116B or must be modified by the SETORG
        program if they are to run under version 116B  without  producing
        illegal memory references or error messages.

        The SETORG program has two commands and two subcommands:

        @RUN SETORG

        SETORG>PATCH filespec,...,filespec,  where the filespec names the
                                             files  to  be modified.  The
                                             default extension is EXE.

         >>ORG  origin                       where  the  origin  is   the
                                             HR1022  origin.  The default
                                             is  512,   but   should   be
                                             entered   here   as  500  to
                                             ensure  compatibility   with
                                             version 116B.

         >>NAME filename                     where the  filename  is  the
                                             1022   high   segment.   The
                                             default is 1022C, but as  of
                                             version   116B,   the   user
                                             should explicitly  give  the
                                             filename as 1022D.

         SETORG> QUIT                        where QUIT exits SETORG.

        A copy of 1022D.EXE is provided on the distribution tape and  may
        be used to create the OTS.  Alternatively, you may create the OTS
        with the following commands:

        @RUN 1022SA

        *OTS 1022D.EXE=/ORG:500/CBL

   (8)  The necessary files you now have are 1022D.EXE and LIBO12.EXE.



   2.4.3.3  Modified COBOL-74 LIBOL

|  You may install 1022 with  a  modified  COBOL-74  LIBOL  by  following
|  either  of  the two sets of procedures described below.  Which set you
|  follow depends on whether or not you use DEC's Autopatch utilities.
|  






                                   - 51 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-36
   Revision 12


|  2.4.3.3.1  Autopatched COBOL-74 LIBOL
|  
|  If  you  are  using  DEC's  Autopatch  utilities,  use  the  following
|  eight-step procedure each time that you autopatch to install 1022 with
|  a modified COBOL-74 LIBOL:
|  
|  (1)  Use the DEC Autopatch utilities to patch  your  COBOL.   If  your
|  main    autopatching    directory,    PAT:,   is   not   the   default
|  (AP20:<AUTOPATCH>),  define  PAT:   as  whatever  your  main  patching
|  directory is in your LOGIN.CMD and BATCH.CMD files before proceeding.
|  
|  (2)  Confirm that the following files are on disk:
|  
|           DIS:CBLIO.MAC
|  
|           DIS:COBFUN.MAC
|  
|           PAT:C74LIB.REL
|  
|           PAT:C74SHR.REL
|  
|           PAT:*.UNV
|  
|  
|  (3)  Restore the following files to PAT:  from the  1022  distribution
|  tape:
|  
|           CBLIO.12B
|  
|           CBLIO.C12
|  
|           CBLIO.M12
|  
|           COBFUN.12B
|  
|           COBFUN.C12
|  
|           COBFUN.M12
|  
|           F22.MAC
|  
|  
|  (4)  Issue the following command:
|  
|           @SUBMIT LIBOL.CT2/TAG:C74/TIME:1:00:00
|  
|  
|  (5)  When the job has finished, type out the file LIBOL.LOG to confirm
|  that the job completed successfully.
|  
|  (6)  Assuming that the job completed successfully, your new  LIBOL  is
|  INS:C74O12.EXE.  Copy this file to SYS:C74O12.EXE.

                                   - 52 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-37
   Revision 12


|  (7)  Create the object time system.
|  
|  Prior to version 115, the COBOL run-time system was called 1022R,  and
|  began at page 530.  In version 115, the run-time system was moved down
|  to page 512, and renamed 1022C to avoid confusion with older programs.
|  In  version  116B,  the run-time system has been renamed 1022D and has
|  been moved to begin at page 500.  To change existing COBOL programs to
|  use  the  new  1022D  rather  than  1022R or 1022C, you may reload the
|  programs with the new HR system, or you may use the program SETORG.EXE
|  to patch them directly.
|  
|  COBOL programs loaded under pre-116B  versions  of  System  1022  must
|  either be reloaded with 116B or must be modified by the SETORG program
|  if they are to run under version 116B without producing illegal memory
|  references or error messages.
|  
|  The SETORG program has two commands and two subcommands:
|  
|  @RUN SETORG
|  
|       SETORG>PATCH filespec,...,filespec,  where the filespec names the
|                                            files  to  be modified.  The
|                                            default extension is EXE.
|  
|        >>ORG  origin                       where  the  origin  is   the
|                                            HR1022  origin.  The default
|                                            is  512,   but   should   be
|                                            entered   here   as  500  to
|                                            ensure  compatibility   with
|                                            version 116B.
|  
|        >>NAME filename                     where the  filename  is  the
|                                            1022   high   segment.   The
|                                            default is 1022C, but as  of
|                                            version   116B,   the   user
|                                            should explicitly  give  the
|                                            filename as 1022D.
|  
|        SETORG> QUIT                        where QUIT exits SETORG.
|  
|       A copy of 1022D.EXE is provided on the distribution tape and  may
|       be used to create the OTS.  Alternatively, you may create the OTS
|       with the following commands:
|  
|       @RUN 1022SA
|  
|       *OTS 1022D.EXE=/ORG:500/CBL
|  
|  (8)  The necessary files you now have are 1022D.EXE and LIBO12.EXE.




                                   - 53 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-38
   Revision 12


|  2.4.3.3.2  Non-Autopatched COBOL-74 LIBOL
|  
   To install 1022 with a modified  COBOL-74  LIBOL,  use  the  following
|  eight-step  procedure of which the first sex steps may be omitted when
|  you install subsequent versions of 1022 if there have been no  changes
|  to the current CBLIO or COBFUN and you have not autopatched:

   (1)  Restore the following files  from  the  COBOL  distribution  tape
        (COBOL-74    saveset):     C74LIB.REL,   C74SHR.REL,   CBLIO.MAC,
        COBFUN.MAC, *.UNV to a work area.

   (2)   For COBOL  12B  use  CBLIO.12B  and  COBFUN.12B  from  the  1022
        distribution tape rather than from the COBOL tape.

   (3)  For versions other than 12B, use the FILCOM  program  to  compare
        and  list  the  differences  between  your CBLIO.MAC and the 1022
        CBLIO.12B, and between your COBFUN.MAC and the  1022  COBFUN.12B.
        A  systems  programmer  should  modify  your  CBLIO and COBFUN to
        reflect the changes required for 1022 use.

   (4)  Compile the files to produce CBLIO.REL and COBFUN.REL:

        @COMPILE FT22.MAC+CBLIO.12B/MAC
        @COMPILE FT22.MAC+COBFUN.12B/MAC

   (5)  Use the MAKLIB program to replace the old CBLIO and COBFUN  files
        with the new and to re-index C74LIB:

        @MAKLIB

        *C74LIB=C74LIB/MASTER:COBFUN,COBFUN/REPLACE:COBFUN
        *C74LIB=C74LIB/MASTER:CBLIO,CBLIO/REPLACE:CBLIO
        *C74LIB=C74LIB/INDEX
        ^C

   (6)  Load the C74LIB and save the COBOL with the name C74O12.

        @LINK
        */NOSYM C74SHR,C74LIB/SEARCH/GO

        @SAVE C74O12

   (7)  Create the object time system.

        Prior to version 115, the COBOL runtime system was called  1022R,
        and  began  at  page 530.  In version 115, the runtime system was
        moved down to page 512, and renamed 1022C to avoid confusion with
        older  programs.   In  version  116B, the runtime system has been
        renamed 1022D and has been moved to begin at page 500.  To change
        existing COBOL programs to use the new 1022D rather than 1022R or
        1022C, you may reload the programs with the new HR system, or you
        may use the program SETORG.EXE to patch them directly.

                                   - 54 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-39
   Revision 12


        COBOL programs loaded under pre-116B versions of System 1022 must
        either  be  reloaded  with 116B or must be modified by the SETORG
        program if they are to run under version 116B  without  producing
        illegal memory references or error messages.

        The SETORG program has two commands and two subcommands:

        @RUN SETORG

        SETORG>PATCH filespec,...,filespec,  where the filespec names the
                                             files  to  be modified.  The
                                             default extension is EXE.

         >>ORG  origin                       where  the  origin  is   the
                                             HR1022  origin.  The default
                                             is  512,   but   should   be
                                             entered   here   as  500  to
                                             ensure  compatibility   with
                                             version 116B.

         >>NAME filename                     where the  filename  is  the
                                             1022   high   segment.   The
                                             default is 1022C, but as  of
                                             version   116B,   the   user
                                             should explicitly  give  the
                                             filename as 1022D.

         SETORG> QUIT                        where QUIT exits SETORG.

        A copy of 1022D.EXE provided on the distribution tape and may  be
        used  to  create  the OTS.  Alternatively, you may create the OTS
        with the following commands:

        @RUN 1022SA

        *OTS 1022D.EXE=/ORG:500/CBL

   (8)  The necessary files you now have are 1022D.EXE and C74O12.EXE.



   2.4.4  TOPS-20 COBOL-13

   You can install COBOL-13 with a modified or unmodified  COBOL  library
   (COBLIB).

   Software  House  distributes  modifications  to  COBLIB  (the  patches
   CBLIO.13  and COBFUN.13) that are needed if any COBOL-13 programs that
   use 1022 also use overlays, the SORT verb in COBOL, TRAFFIC,  or  ever
   split  the  top  level  index of a COBOL ISAM file.  If you modify the
   COBLIB, the new version of COBLIB becomes the  standard  COBLIB,  even
   for programs that do not use 1022.

                                   - 55 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-40
   Revision 12


   As with all  versions  of  COBOL  after  COBOL-11,  the  COBOL-13  OTS
   (COBOTS-V13.EXE)  is  separate  from  the  1022  OTS  on TOPS-20.  All
   programs can call DBCBL, DBC74, and DBC68 (though there is no  version
   13 COBOL-68).



   2.4.4.1  Unmodified COBLIB

   Running 1022  with  an  unmodified  COBLIB  will  produce  1022  error
   messages  warning about the unmodified COBLIB.  You can suppress these
   error messages, but in that case you will not receive a clear  warning
   if you try to use overlays, the COBOL SORT, or a split top level index
   of an ISAM file.  The use of "open extend" with unmodified COBLIB will
   also  produce  an  error  message.   To  install  1022  COBOL  with an
   unmodified COBLIB, use the following one-step procedure:

   Prior to version 115, the COBOL run-time system was called  1022R  and
   began  at  page 530.  In later versions, the run-time system was moved
   down to page 512 and renamed  1022C  to  avoid  confusion  with  older
   programs.  In version 116B, the run-time system has been renamed 1022D
   and has been moved to begin at page 500.   To  change  existing  COBOL
   programs  to  use  the  new  1022D rather than 1022R or 1022C, you may
   reload the programs with the new HR system, or you may use the  SETORG
   program to patch them directly.

   Note that COBOL programs loaded under pre-116B versions of System 1022
   must  either  be  reloaded with 116B or must be modified by the SETORG
   program if they are  to  run  under  version  116B  without  producing
   illegal memory references or other error messages.

   A copy of 1022D is provided on the distribution tape.   If,  for  some
   reason, you need to set up another one, the procedure is:

        @RUN 1022SA

        *OTS 1022D.EXE=/ORG:500/CBL

   (1)  Since you are not installing the Software House patches to LIBOL,
        you  will  probably want to turn off the "unmodified LIBOL" error
        messages  that  will  be  generated  by  DBCBL  calls.   Use  the
        following commands to suppress those error messages:

        @RUN 1022SA
        *FIX <OTSname> USING NOMSG6
        *QUIT

        @MAKLIB
        *HL1022.REL=HL1022.REL,NOMSG6.MAK/FIX

   The SETORG program has two commands and two subcommands:


                                   - 56 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-41
   Revision 12


        @RUN SETORG

        SETORG>PATCH filespec,...,filespec,  where the filespec names the
                                             files  to  be modified.  The
                                             default extension is EXE.

         >>ORG  origin                       where  the  origin  is   the
                                             HR1022  origin.  The default
                                             is  512,   but   should   be
                                             entered   here   as  500  to
                                             ensure  compatibility   with
                                             version 116B.

         >>NAME filename                     where the  filename  is  the
                                             1022   high   segment.   The
                                             default is 1022C, but as  of
                                             version  116B,  users should
                                             explicitly   name   filename
                                             1022D.

         SETORG> QUIT                        where QUIT exits SETORG.



   2.4.4.2  Modified COBLIB

   To install 1022 with a modified COBLIB, use the  following  seven-step
|  procedure  of  which  the  first  five  steps  may be omitted when you
|  install subsequent versions of 1022 if there have been no  changes  to
|  the current COBLIB or COBFUN and you have not autopatched:

   (1)  Restore the following files from the COBOL distribution tape to a
        work    area:     <SUBSYS>COBLIB.REL,    <COBOL-BUILD>C8XSHR.REL,
        <COBOL-BUILD>*.UNV.

   (2)  Copy the CBLIO.13, COBFUN.13, and FT22.MAC files  from  the  1022
        distribution  tape  to the work area, replacing the extension .13
        by the extension .MAC.

   (3)  Compile the files to produce CBLIO.REL and COBFUN.REL:

        @COMPILE FT22.MAC+CBLIO.MAC
        @COMPILE FT22.MAC+COBFUN.MAC

   (4)  Use the MAKLIB program to replace the old CBLIO and COBFUN  files
|       with the new ones and to reindex the COBOL library.  Note that if
|       you have already applied DEC LIBOL  patch  1140  to  allow  "open
|       extend,"   you   should   omit   the  instruction  COBLIB=COBLIB,
|       OPENEX.MAK/FIX when you run MAKLIB.

        @MAKLIB


                                   - 57 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-42
   Revision 12


        *COBLIB=COBLIB/MASTER:COBFUN,COBFUN/REPLACE:COBFUN
        *COBLIB=COBLIB/MASTER:CBLIO,CBLIO/REPLACE:CBLIO
        *COBLIB=COBLIB, OPENEX.MAK/FIX
        *COBLIB=COBLIB/INDEX
        ^C

   (5)  Load and save the COBOL library with the appropriate name.

        @LINK
        */NOSYM C8XSHR,COBLIB/SEARCH/GO

        @SAVE COBOTS-V13

   (6)  Create the object time system.

        Prior to version 115, the COBOL runtime system was called  1022R,
        and  began  at  page 530.  In version 115, the runtime system was
        moved down to page 512, and renamed 1022C to avoid confusion with
        older  programs.   In  version  116B, the runtime system has been
        renamed 1022D and has been moved to begin at page 500.  To change
        existing COBOL programs to use the new 1022D rather than 1022R or
        1022C, you may reload the programs with the new HR system, or you
        may use the program SETORG.EXE to patch them directly.

        COBOL programs loaded under pre-116B versions of System 1022 must
        either  be  reloaded  with 116B or must be modified by the SETORG
        program if they are to run under version 116B  without  producing
        illegal memory references or error messages.

        The SETORG program has two commands and two subcommands:

        @RUN SETORG

        SETORG>PATCH filespec,...,filespec,  where the filespec names the
                                             files  to  be modified.  The
                                             default extension is EXE.

         >>ORG  origin                       where  the  origin  is   the
                                             HR1022  origin.  The default
                                             is  512,   but   should   be
                                             entered   here   as  500  to
                                             ensure  compatibility   with
                                             version 116B.

         >>NAME filename                     where the  filename  is  the
                                             1022   high   segment.   The
                                             default is 1022C, but as  of
                                             version   116B,   the   user
                                             should explicitly  give  the
                                             filename as 1022D.

         SETORG> QUIT                        where QUIT exits SETORG.

                                   - 58 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-43
   Revision 12


        A copy of 1022D.EXE is provided on the distribution tape and  may
        be used to create the OTS.  Alternatively, you may create the OTS
        with the following commands:

        @RUN 1022SA

        *OTS 1022D.EXE=/ORG:500/CBL

   (7)  The  necessary   files   you   now   have   are   1022D.EXE   and
        COBOTS-V13.EXE.



   2.4.5  Checking Versions Of COBOL

   You can repeat the process of this section for each version  of  COBOL
   you  wish to run with 1022.  And you can install different versions or
   make a different version the default on different system areas  (SYS:,
   NEW:, OLD:).

   You can check that the versions of COBOL are properly  installed  with
   the 1022SA INFO command:

        @RUN 1022SA

        *INFO HR1022.REL

   Press <RETURN> at  each  prompt.   This  will  list  the  COBOL  files
   installed with 1022.

   You have now installed COBOL.  You can proceed to install MACRO.



   2.5  INSTALL MACRO

   Software House distributes a  1022/MACRO  object  time  system  called
   1022M.EXE.   If  1022M.EXE is present and you have not applied patches
   to HL1022.REL,  the  installation  of  MACRO  is  virtually  complete.
   Installation  will be completed when 1022M.EXE is copied to SYS:  (see
   Section 2.11).

   If 1022M.EXE is missing or if  you  choose  to  rebuild  it,  use  the
   following procedure.

             .RUN 1022SA         [TOPS-10]

                  or

             @RUN 1022SA         [TOPS-20]

             *OTS 1022M.EXE=/ORG:400/MAC

                                   - 59 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-44
   Revision 12


   Installation of MACRO will be completed when 1022M.EXE  is  copied  to
   SYS:  (see Section 2.11).



   2.6  INSTALL HOST LANGUAGES ON A FORK

   On TOPS-20 systems, you may run 1022 host  languages  on  an  inferior
   fork,  freeing  high and low segment space for your program.  The host
   language library for this configuration is HF1022.  It is like HR1022,
   but its OTS resides at page 600 on an inferior fork.

   Loading with HF1022 unmaps the pages on the superior fork between  the
   first free location in memory at the time of a call to one of the host
   language initialization routines (such as DBFOR  or  DBCBL)  and  page
   400,  and  also  frees the space in the lower part of the high segment
   that would otherwise have been occupied by the 1022 OTS (such as 1022T
   or 1022D).  Pages 700-737 are also unmapped.

   The unmapping of the pages  in  the  low  segment  has  two  important
   implications.   The  first  of  these  is that calls to DBCORE are not
   handled by System 1022's core management  routines  but  are  changed,
   instead,  to calls to FUNCT., FORTRAN's core management routine.  This
   means that consecutive calls to DBCORE cannot be counted on  to  yield
   contiguous  memory  as  they  would  if  you had loaded with HL1022 or
   HR1022.

   In addition, any pages of memory in the low  segment  that  have  been
   unmapped cannot be used to pass arguments to or receive arguments from
   1022.  Any attempts to do so will yield unpredictable results with  no
   error message.

   To  install  host  languages  on  a  fork,  you  usually  simply  copy
   HF1022.REL  and  1022SF.EXE (the OTS) to the system area.  See Section
   2.11.

   In some unusual cases, you may need to rebuild 1022SF.EXE.   This  may
   be  necessary  if  you  have applied MAKLIB patches to HL1022.REL.  To
   rebuild 1022SF, use the following procedure:

   (1)  Make sure that the following files  from  the  1022  distribution
        tape  are  in  your  work area:  QSUBFK.REL and 1022SF.CCL.  Both
        files are used only for building 1022SF and are not copied to the
        system disk area.

   (2)  Load the languages with the control file.  The control file saves
        1022SF.EXE, so no SAVE command should be done:

        @LINK
        *@1022SF.CCL

   (3)  The necessary file you have is 1022SF.EXE.

                                   - 60 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-45
   Revision 12


   Continue with "Designate DBA," Section 2.7.



   2.7  DESIGNATE DBA

   You may designate one user as the System 1022 Data Base Administrator.
   This  user  will  have  "owner"  access  to all System 1022 data sets,
   subject to TOPS-10 or TOPS-20 access protection, in  addition  to  the
   owners  of  each  of  the  data  sets.   There  will  be  no Data Base
   Administrator unless you specify one with the following procedure.

             .RUN 1022SA         [TOPS-10]

             *DBA [10,1234]      [makes user [10,1234] the DBA]

        or

             @RUN 1022SA         [TOPS-20]

             *DBA <JONES>        [makes user <JONES> the DBA]

   Refer to Chapter 3 for a complete description of the DBA command.

   Continue with "Specify Resident Disk Area," Section 2.8.



   2.8  SPECIFY RESIDENT DISK AREA

   System 1022 is configured to reside on the default  system  disk  area
   both  on TOPS-10 systems and on TOPS-20 systems.  Once the System 1022
   software has been placed on the default system area,  or  on  an  area
   that  is  part of the system search list (TOPS-10), or on an area that
   is part of the system-wide definition for  SYS:   (TOPS-20),  you  can
   proceed to "Verify Configuration," Section 2.9.

   Otherwise, you must specify the System 1022 resident  disk  area  with
   the following procedure.

             .RUN 1022SA         [TOPS-10]
        or   @RUN 1022SA         [TOPS-20]

             *RESIDE PUB:
             [if 1022's resident area is to be  ersatz  device  PUB:   or
             logical device PUB:]

             *RESIDE DSKB:[10,77]
             [if 1022's resident area is to be PPN 10,77 on DSKB:]

             *RESIDE PS:<DB>
             [if 1022's resident area is to be disk  area  <DB>  on  disk

                                   - 61 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-46
   Revision 12


             structure PS:]

   Continue with "Verify Configuration," Section 2.9.



   2.9  VERIFY CONFIGURATION

   Verify that System 1022 is configured as you want.  Use the  following
   procedure.

             .RUN 1022SA         [TOPS-10]
        or   @RUN 1022SA         [TOPS-20]

             *INFO HL1022.REL    [type a carriage-return in
                                  response to all the prompts]
             *INFO HR1022.REL
             *INFO 1022T.EXE     [your 1022/FORTRAN OTS]
             *INFO 1022C2.EXE    [your 1022/COBOL OTS]
             *INFO 1022M.EXE     [your 1022/MACRO OTS]

   Continue with the "Set System Variable Defaults" section, 2.10.



   2.10  SET SYSTEM VARIABLE DEFAULTS

   Set any  system  variable  defaults  that  differ  from  the  standard
   defaults.   See  "DEFAULT  Command"  in  Section  3.9.   The following
   procedure uses the file  DEFSYS.DMC  to  change  any  system  variable
   defaults.

             .RUN 1022SA         [TOPS-10]
        or   @RUN 1022SA         [TOPS-20]

             *DEFAULT DEFSYS

   Continue with "Copy to System Area," Section 2.11.



   2.11  COPY TO SYSTEM AREA

   Copy the System 1022 software  to  1022's  resident  disk  area.   The
   following   examples   show  SYS: as  the  resident  area.   The  file
   NS1022.EXE can optionally be copied to the system area, but it must be
   available  for Software House support staff.  In addition to the files
   listed below, copy the appropriate FORLIB.REL  file  to  the  resident
   disk  area.  This will be the FORLIB.REL distributed with FORTRAN-7 or
   FORTRAN-6,  the  FORLIB.REL  distributed  by   Software   House   with
   FORTRAN-5, or the FORLIB.REL you modified with your FORTRAN-5.


                                   - 62 -
   SYSTEM 1022 INSTALLATION GUIDE                               Page 2-47
   Revision 12


   On TOPS-10 the procedure is:

             .COPY SYS:*.EXE<155>=*.EXE
             .COPY SYS:1022.EXE<156>=1022.EXE
             .COPY SYS:NS1022.EXE<156>=NS1022.EXE     [optional]
             .COPY SYS:1022.ERR<155>=1022.ERR
             .COPY SYS:1022.DMH<155>=1022.DMH
             .COPY SYS:TECO22.ERR<155>=TECO22.ERR
             .COPY SYS:HR1022.REL<155>=HR1022.REL
             .COPY SYS:HL1022.REL<155>=HL1022.REL

   On TOPS-20 the procedure is:

             @COPY (FROM) *.EXE (TO) SYS:*.EXE;P775252
             @COPY (FROM) 1022.EXE (TO) SYS:1022.EXE;P775212
             @COPY (FROM) NS1022.EXE (TO)
             SYS:NS1022.EXE;P775212   [optional]
             @COPY (FROM) 1022.ERR (TO) SYS:1022.ERR;P775252
             @COPY (FROM) 1022.DMH (TO) SYS:1022.DMH;P775252
             @COPY (FROM) TECO22.ERR (TO) SYS:TECO22.ERR;P775252
             @COPY (FROM) HR1022.REL (TO) SYS:HR1022.REL;P775252
             @COPY (FROM) HL1022.REL (TO) SYS:HL1022.REL;P775252
             @COPY (FROM) HF1022.REL (TO) SYS:HF1022.REL;P775252

   This completes the installation of System 1022.



   2.12  SYSTEM 1022 EXPIRATION DATE

   System 1022 contains a built-in expiration date.  If you run it  after
   its  expiration  date, 1022 will type an error message and exit.  1022
   automatically warns users if they are running it within 30 days of its
   expiration  date.  You may determine the expiration date from the 1022
   system variable SYSEXP with the 1022 (not 1022SA) command

             PRINT SYSEXP

   The expiration date exists both for Software  House's  protection  and
   for  your  site's  protection.  If you have a System 1022 License, you
   need  not  be  concerned  about  expiration  dates;   Software   House
   periodically  will  send  you  a System 1022 distribution tape with an
   updated expiration date.

   An expired copy of System 1022 cannot be run until it is  replaced  or
   until a Software House technical staff member has patched it.







                                   - 63 -












                                 CHAPTER 3

                             THE 1022SA PROGRAM



   The 1022SA (System Administration) program  tailors  the  System  1022
   software to the needs of each installation.



   3.1  COMMAND FORMAT

   Commands to 1022SA consist of a command name followed by  the  command
   parameters.   Command  names  may  be abbreviated to their first three
   letters.



   3.2  RESIDE COMMAND

   The RESIDE command specifies the file structure and disk area on which
   System 1022 will reside.  Host Language programs need this information
   to read the 1022 error message file and to invoke  stand-alone  System
   1022 with DBEXEC subroutine calls.

   The format of the RESIDE command is

             RESIDE file-descriptor

   For example,

             RESIDE DSKB:[25,25] [TOPS-10 systems]

             RESIDE PS:<DB>      [TOPS-20 systems]

   The RESIDE command patches HL1022.REL, HR1022.REL and the 1022  object
   time  system  files.   These files, therefore, must be present in your
   disk area.






                                   - 64 -
   THE 1022SA PROGRAM                                            Page 3-2
   Revision 12


   System 1022 from the distribution tape  assumes  SYS:1022.EXE  as  the
   default resident file specification.  Therefore, the RESIDE command is
   not needed if 1022 is to reside  on  SYS: on  TOPS-10  systems  or  on
   <SUBSYS> on TOPS-20 systems.



   3.3  OTS COMMAND

   3.3.1  Purpose

   The OTS command creates a 1022/host language object time system.  Such
   an  object  time  system  normally  contains  a standard host language
   run-time system (FOROTS  or  LIBOL)  with  the  1022  access  routines
   appended to the end.  (TOPS-20 sites running versions of FORTRAN later
   than FORTRAN-5 or versions of COBOL later than COBOL-11 are exceptions
   to  this rule:  here, the language OTS and the 1022 OTS are separate.)
   For example:

        1022T.EXE

     ----------------
     !              !  400000
     !              !
     !    FOROTS    !
     !              !
     !              !
     ----------------
     !              !
     !              !
     !     1022     !
     !              !
     !              !
     ----------------


   The entire object time system is sharable, so that multiple  users  of
   the host language share the same copy of the object time system.



   3.3.2  Command Format

   The OTS command takes as  input  the  host  language  run-time  system
   (e.g.,  FOROTS  or  LIBOL) and creates the 1022 object time system for
   that language.  The format of the OTS command is

             OTS out-file-descriptor=in-file-descriptor/switch or
             OTS out-file-descriptor=/ORG:n/switch

   where /switch is one of /FOR,  /F6,  /MAC,  /C68,  /C74,  or  /CBL  to
   indicate  for  which  host  language  the  object  time system will be

                                   - 65 -
   THE 1022SA PROGRAM                                            Page 3-3
   Revision 12


   created.  /ORG:n indicates at which page address the OTS  will  appear
   at  run time.  After giving the OTS command, 1022SA will automatically
   exit  and  the  new  EXE  file  will  be  saved.   Do  not  give   the
   monitor-level SAVE command.



   3.3.3  Examples


             OTS 1022T.EXE=SYS:FOROTS.EXE/FOR
             OTS 1022C1.EXE=SYS:LIBO11.EXE/CBL
             OTS 1022R.EXE=/ORG:530/CBL
             OTS 1022C4.EXE=SYS:C74O12.EXE/C74
             OTS 1022C8.EXE=SYS:LIBO12.EXE/C68

   In  the  first  example  above,  we  create  from   SYS:FOROTS.EXE   a
   1022/FORTRAN  object  time  system  called  1022T.EXE.   In the second
   example above, we create from SYS:LIBO11.EXE a 1022/COBOL object  time
   system  called  1022C1.EXE.   In  the third example above, we create a
   free-standing 1022/COBOL object time system  called  1022R.EXE,  which
   will  be mapped at run time into the user's address space beginning at
   page 530.  In the fourth example above, we create from  SYS:C74O12.EXE
   a  1022/COBOL object time system called 1022C4 that can be called with
   the DBC74 command.   In  the  fifth  example  above,  we  create  from
   SYS:LIBO12.EXE  a 1022/COBOL object time system called 1022C8 that can
   be called with the DBC68 command.

   For TOPS-10 users, the OTS command also will read and/or  create  .SHR
   files  in  addition  to .EXE files.  The /LOAD switch may follow other
   switches in the command line to force use of LOADER rather  than  LINK
   on  the  DEC-10  when building 1022 object time systems.  /LINK is the
   default.



   3.3.4  Operation

   The files HL1022.REL and HR1022.REL must be in your disk area for  the
   OTS  command  to  operate correctly.  The OTS command loads files from
   HL1022.REL and the file specified to the right of the equal  sign  and
   then patches in HR1022.REL the subroutines DBFOR, DBMAC, DBCBL, DBC68,
   or  DBC74  (depending  on  the  command  line  switch)  so  that   the
   appropriate  subroutine will know at run time where to find its object
   time system.

   When the OTS command runs  successfully,  control  leaves  the  1022SA
   program and LOADER or LINK runs automatically.





                                   - 66 -
   THE 1022SA PROGRAM                                            Page 3-4
   Revision 12


   Only user programs that are loaded with HR1022.REL use  the  1022/host
   language  object  time  systems.   At  run  time,  the  initialization
   subroutine (DBFOR, DBCBL, DBC68, DBC74, or DBMAC) pages into core  its
   object time system.



   3.3.5  Naming Conventions

   Software  House  recommends  the  following  standard  filenames   for
   1022/host language object time systems.

   Host Language                 Recommended OTS filename
   -------------                 ------------------------

   FORTRAN-10/20 version 6       1022T6.EXE
   FORTRAN-10/20 version 5       1022T.EXE
   COBOL                         1022Cn.EXE ["n" is  the  last  digit  of
                                 COBOL's version number]
                                 1022D.EXE  [TOPS-20  sites  with   COBOL
                                 version 12 and later]
   MACRO                         1022M.EXE



   3.3.6  Restrictions

   HL1022.REL and HR1022.REL are not indexed files when distributed,  but
   may be indexed with DEC's MAKLIB program.  LOADER on DEC-10's will not
   handle indexed library files.  The OTS command in 1022SA now uses LINK
   by  default.   If  you  wish to load the object time system files with
   LOADER, you must give the /LOADER switch to the OTS command.

   System 1022 patches are distributed to patch an unindexed 1022 library
   (see PATCH command description below).  If you index your 1022 library
   files, you must keep an original unindexed copy of each  in  order  to
   apply  patches  successfully.   After  patching  or  OTS  building  is
   completed, you may index the 1022 library .REL files as you would  any
   other library .REL files.



   3.4  INFO COMMAND

   The INFO command examines the  1022  library  files  and  object  time
   systems,  prints information about them, and allows you to change some
   of the information.






                                   - 67 -
   THE 1022SA PROGRAM                                            Page 3-5
   Revision 12


   The format of the INFO command is

             INFO file-descriptor

   For example,

             *INFO HL1022.REL
             RESIDENT = SYS:1022.EXE CHANGE?

             *INFO HR1022.REL
             1022-FORTRAN OTS = SYS:1022T.EXE CHANGE?
             1022-COBOL OTS = SYS:1022C2.EXE CHANGE?
             1022-COBOL-68 OTS = SYS:1022C8.EXE CHANGE?
             1022-COBOL-74 OTS = SYS:1022C4.EXE CHANGE?
             1022-MACRO OTS = SYS:1022M.EXE CHANGE?

             *INFO 1022T.EXE
             RESIDENT = NEW:1022.EXE CHANGE?  SYS:1022.EXE



   3.5  DBA COMMAND

   3.5.1  Operation

   The DBA command identifies  a  user  as  the  System  1022  Data  Base
   Administrator.  The Data Base Administrator receives "owner" status to
   every 1022 data set in addition to the normal owner of each data  set.
   This  status  allows  the DBA to obtain and change information on data
   set security, passwords, and so on.

   The DBA command is valid only for version 114  or  later  versions  of
|  System  1022.   The  command  patches  the files HL1022.REL, 1022.EXE,
|  NS1022.EXE, and the object time systems;  therefore, these files  must
   reside in your disk area for the DBA command to work.



   3.5.2  Restrictions

   There is no Data Base Administrator until you specify one.  After  you
   have specified one with the DBA command, you must be logged in as that
   DBA in order to specify a new DBA.










                                   - 68 -
   THE 1022SA PROGRAM                                            Page 3-6
   Revision 12


   3.5.3  Command Format

   3.5.3.1  TOPS-20 Sites

   The format of the DBA command is
|  
|            DBA (device)<directory string>
|  
|  If the device is unspecified, the default is PS:.  Both the device and
|  the directory string may be wildcarded.  For example,
|  
|            DBA *:<SMITH>
|  
|  This designates as the DBA the user who is logged in or  connected  to
|  the directory <SMITH> on any device and then runs 1022.  Similarly,
|  
|            DBA PS:<SMITH*>
|  
|  designates as the DBA the user who is logged in or  connected  to  the
|  directory  PS:<SMITH>  or any subdirectory of PS:<SMITH> and then runs
|  1022.
|  
|  System 1022 establishes the identity of the DBA at start-up time, that
|  is, when a user runs 1022 when logged in or connected to the DBA area.
|  The user remains the DBA for the duration of the session, even  during
|  a PUSH to another area.



   3.5.3.2  TOPS-10 Sites

   The format of the DBA command is

             DBA [proj,prog]

   For example,

             DBA [50,1]

   Additionally, you may specify a mask of 12 octal digits following  the
   project-programmer  number.   A  user  whose  ppn  ANDed with the mask
   matches the DBA ppn ANDed with the  mask  receives  DBA  status.   For
   example,

             DBA [50,1] 777777000000

   makes any user with project number 50 the Data Base Administrator.






                                   - 69 -
   THE 1022SA PROGRAM                                            Page 3-7
   Revision 12


|  3.6  1022SA BANNER COMMAND
|  
|  It is now possible for sites to create their own  system  banner  with
|  the 1022SA BANNER command.  The format of the command is
|  
|       BANNER
|  
|  When the 1022SA BANNER command  is  given,  the  following  prompt  is
|  displayed:
|  
|       Enter banner:
|  
|  You may then enter a string of up to 60 characters.  This replaces the
|  Software  House banner except for the part that identifies the version
|  of 1022 that you are running.
|  
|  
|  
|  3.7  INFORM DBA COMMAND
|  
|  3.7.1  Purpose
|  
|  The purpose of the INFORM DBA command is to allow users of  1022SA  to
|  determine the project-programmer number (ppn) of the site's designated
|  DBA, if any.  This is  particularly  useful  if  the  site  wishes  to
|  designate  a  new  DBA after the former DBA has left without doing so.
|  Someone with the appropriate privileges can then build a  new  account
|  with the former DBA's ppn, log into it, and designate the new DBA.
|  
|  
|  
|  3.7.2  Command Format
|  
|  The format of the INFORM DBA command is
|  
|            INFORM DBA
|  
|  This will return the ppn of the designated DBA, if there is  one.   If
|  there is no designated DBA, the command returns the message
|  
|            DBA not yet assigned.
|  
|  If your site has elected to allow multiple users to have DBA status by
|  specifying  a  mask  in  the  DBA  command (see above), the INFORM DBA
|  command will return the mask number as well as the DBA ppn.








                                   - 70 -
   THE 1022SA PROGRAM                                            Page 3-8
   Revision 12


   3.8  PATCH COMMAND

   3.8.1  Purpose

   The PATCH command installs System 1022 patches that are distributed by
   Software  House.   The  patches are contained in a file with extension
   .FIX.



   3.8.2  Command Format

   The format of the PATCH command is

             PATCH patch-filename

   Patch-filename is the name of the .FIX file that  contains  the  patch
   instructions.

   Patching is described completely in Chapter 4.



   3.9  FIX COMMAND

   3.9.1  Purpose

   The FIX command is a general form of the PATCH command.  It accepts in
   the  command line the name of the file that is to be patched.  The FIX
   command is useful in a number of  circumstances.   It  allows  you  to
   patch an .EXE program made from an unpatched HL1022.REL without having
   to apply a MAKLIB patch and then reload  the  program.   FIX  is  also
   useful if HL1022.REL is unpatched and you need to make a new OTS or if
   you call your 1022 program OTSes by nonstandard names (which will  not
   be found if the PATCH command is issued).



   3.9.2  Command Format

   The format of the FIX command is

             FIX filename USING patch-filename

        or

             FIX filename/D USING patch-filename

   The /D switch indicates that the filename is patched as  a  data  file
   rather than as an .EXE-format file.



                                   - 71 -
   THE 1022SA PROGRAM                                            Page 3-9
   Revision 12


   3.10  CHECK COMMAND

   The format of the CHECK command is

             CHECK <MAKLIB patch>

   This command verifies that the MAKLIB patch is  correctly  entered  by
   the  user.   After  the  user types a MAKLIB patch, he runs 1022SA and
   gives  the  CHECK  command.   1022SA  will  either   respond   [Errors
   Encountered]  or [OK].  If there are errors, the user should check for
   typing errors.

   In the checking of MAKLIB patches,  tabs  and  spaces  are  identical.
   Multiple tabs, spaces, or blank lines are acceptable, and comments and
   remarks are not checked.



   3.11  DEFAULT COMMAND

   3.11.1  Purpose

   The DEFAULT command changes the default values for most  user-settable
   system  variables.   The  table of system variables in the General Use
   chapter of the User's Reference  Manual  shows  the  standard  default                  ______ _________  ______
   values and the variables that can be changed.

   In some environments it is useful to change the standard  System  1022
   values  for  some system variables.  For example, the standard default
   for SYSIFTYPE is 0.  This means that users must set SYSIFTYPE to 1  to
   use  the  structured  IF  statements  in PL1022.  In environments that
   generally use the structured IF, the default value for  SYSIFTYPE  can
   be  changed  to  1  for  convenience.   Any  user  wishing to run with
   SYSIFTYPE as 0 would then have to set SYSIFTYPE to 0  with  a  LET  or
   DBSYSV command.

   The DEFAULT command initializes all  the  system  variables  with  the
   standard  default values.  It then reads the specified file and resets
   the system variables listed  there  to  new  values.   Each  time  the
   DEFAULT  command  executes,  it first initializes all system variables
   with the standard default values, so the variable default file  should
   be maintained with the system.











                                   - 72 -
   THE 1022SA PROGRAM                                           Page 3-10
   Revision 12


   3.11.2  Command Format

   The format of the DEFAULT command is

             DEFAULT variable-default-filename

   Unless   otherwise   specified   in   the   DEFAULT    command,    the
   variable-default-filename has the extension DMC.  For example,

             DEFAULT DEFSYS

   reads the list of new system variable defaults in the file DEFSYS.DMC.



   3.11.3  Default File

   The variable default file used by the DEFAULT command contains one  or
   more  LET  commands  to set the system variables.  The LET command has
   the same format as in other 1022 uses.   For  example,  a  file  named
   DEFSYS.DMC can consist of the following statements:

             LET SYSDELIM="#".
             LET SYSIFTYPE=1.
             LET SYSCBLSIGN=2.

   The command DEFAULT DEFSYS changes the default values of  SYSDELIM  to
   #, SYSIFTYPE to 1, and SYSCBLSIGN to 2.



   3.11.4  Common System Variable Defaults

   This section describes the  defaults  commonly  set  for  some  system
   variables.



   3.11.4.1  SYSHLNAME

   The system  variable  SYSHLNAME  controls  changes  in  host  language
   program  names.   The  1022 host language initialization call normally
   changes the program name to show that  1022  has  been  invoked.   The
   program  name  changes only in a monitor table and affects only SYSTAT
   and Control-T displays.  No permanent change is  made.   For  example,
   DBFOR  changes  the program name to 1022FO;  DBCBL changes the program
   name to 1022CO.  If "NOSETNAME" is included  as  an  argument  to  the
   initialization call, 1022 does not change the program name.





                                   - 73 -
   THE 1022SA PROGRAM                                           Page 3-11
   Revision 12


   Example:

        T1.FOR          T2.FOR        ______          ______

        CALL DBFOR     CALL DBFOR('NOSETNAME')
        CALL DBEND     CALL DBEND
        END            END

        After running T1, 1022FO is the program name.  After running  T2,
        T2 is the program name.

   The system administrator can  override  the  'NOSETNAME'  argument  by
   defaulting the variable SYSHLNAME to a nonzero value.

        SYSHLNAME Value  Action

                0        1022 uses the argument 'NOSETNAME'
               -1        1022 never changes the program name
                1        1022 always changes the program name

   SYSHLNAME can be set only by the data base administrator  through  the
   1022SA DEFAULT command.



   3.11.4.2  SYSWRITE20

   The system variable SYSWRITE20 controls TOPS-20 disk writes when  data
   set updates are done.

   When SYSWRITE20 is 0, 1022 does not force  TOPS-20  to  write  changed
   pages  to  the  disk.   This  was  the  standard 1022 operation before
   version 115A.  Since blocks of data may remain in a TOPS-20 cache  for
   some  time  after  an UPDATE is completed, the data set can be damaged
   during a system crash without the user being aware of the damage.

   When SYSWRITE20 is 1 (the standard default), 1022  forces  TOPS-20  to
   write  directly  to  disk.   This takes more time but provides greater
   protection for the data.



   3.11.4.3  SYSNOSEGP

   System 1022 runs as a segmented or unsegmented program under  TOPS-10.
   When  SYSNOSEGP  is  -1, the value of SYSNOSEG (a user-settable system
   variable) controls this.  The data base administrator can establish an
   unsegmented  1022  as standard for the site by setting SYSNOSEGP to 1.
   When SYSNOSEGP is 1, 1022 runs unsegmented and disregards the value of
   SYSNOSEG.   The data base administrator can establish a segmented 1022
   as standard for the site by setting SYSNOSEGP to 0.  When SYSNOSEGP is
   0, 1022 runs segmented and disregards the value of SYSNOSEG.

                                   - 74 -
   THE 1022SA PROGRAM                                           Page 3-12
   Revision 12


   3.11.4.4  SYSSCRDEV

   The system variable SYSSCRDEV specifies the default scratch device for
   commands that use a scratch file structure, like SORT and DUMP SORTED.
   The standard default is DSK.  You may specify any device name of up to
   6 characters.  The colon is not required in SYSSCRDEV.

   Example:

        LET SYSSCRDEV "DSKC"

        This makes the device DSKC: the scratch device.



   3.11.5  Variables For Nonstandard TOPS-10

   Several system variables adjust 1022 for use with older or nonstandard
   versions of TOPS-10.  These variables can only be set by the data base
   administrator through the 1022SA DEFAULT command.   System  1022  will
   not operate properly unless these variables have the correct values.



   3.11.5.1  SYSSFDFLAG

   System 1022 supports SFDs for TOPS-10.  At  sites  using  versions  of
   TOPS-10 that do not support SFDs, the data base administrator must set
   the system variable SYSSFDFLAG default to 1.



   3.11.5.2  SYSCLOSE2

   System 1022 uses the TOPS-10 monitor  call  "CLOSE CHAN,CL.IN".   This
   call  is  supported  in  standard TOPS-10.  At sites using versions of
   TOPS-10  that  do  not  support  this  monitor  call,  the  data  base
   administrator must set the system variable SYSCLOSE2 default to 1.



   3.11.5.3  SYSNOFILOP

   System 1022 uses the TOPS-10 monitor call "FILOP.".   At  sites  using
   versions  of  TOPS-10  that do not support this monitor call, the data
   base administrator must set the system variable SYSNOFILOP default  to
   1.






                                   - 75 -
   THE 1022SA PROGRAM                                           Page 3-13
   Revision 12


   3.11.5.4  SYSNOXCHAN

   System 1022 uses the TOPS-10 monitor extended channels to  support  up
   to  80  channels.   At  sites  using  versions  of TOPS-10 that do not
   support extended channels, the data base administrator  must  set  the
   system variable SYSNOXCHAN default to 1.



   3.11.6  Variables For ENQ Data Sets

   See the "ENQ -- Queue For Update Access" section of Chapter 5  of  the
   User's  Reference  Manual  for  information  on the ENQ/DEQ system for   ______  _________  ______
   scheduling update access.  The following system variables control your
   systems use of queued update access.



   3.11.6.1  SYSENQDEF

   The default choice between the retry and queue systems is  established
   by  the  system  variable  SYSENQDEF.  All data sets built (with LOAD,
   CREATE, or DUMP) when SYSENQDEF is 0  use  the  retry  system,  unless
   otherwise  specified.  All data sets built when SYSENQDEF is 1 use the
   queue system, unless otherwise specified.



   3.11.6.2  SYSTENQ

   Requests remain in the ENQ queue until they gain access or a specified
   time  has  elapsed.  The maximum wait in the queue is specified by the
   system variable SYSTENQ.  When the wait exceeds the time specified  by
   SYSTENQ, 1022 gives an error message, as in the retry access system.



   3.11.6.3  SYSDEQFAST

   The system variable SYSDEQFAST controls writing to a  disk  file  when
   the current ENQ data set is updated.

   When SYSDEQFAST is 0, 1022 writes changes to disk before  update  mode
   is  turned  off.  This assures data protection at the cost of slightly
   greater overhead.

   When SYSDEQFAST is 1, 1022 does not force the  monitor  to  write  its
   buffer  to  disk  immediately when update mode is turned off.  This is
   faster, but the data set can be damaged during a system crash  without
   the user being aware of the damage.

   You may reasonably let SYSDEQFAST equal 1 for greater efficiency  when

                                   - 76 -
   THE 1022SA PROGRAM                                           Page 3-14
   Revision 12


   the data set is protected by an audit trail.



   3.11.6.4  Interrupts With ENQ

   The most efficient type of queued  access  uses  the  monitor  Program
   Software Interrupt (PSI) facility.  System 1022 sleeps as it waits for
   access.  The PSI system interrupts 1022 as soon as access is possible.
   Using PSI, however, can interfere with an application program's use of
   the PSI system, including Control-C trapping.  So  1022  offers  three
   types of interrupt handling.



   3.11.6.4.1  SYSENQTYPE

   The setting of the system variable SYSENQTYPE  selects  one  of  these
   three types of interrupt handling.

   When SYSENQTYPE is 1, 1022 uses PSI.  System 1022 sleeps in the  queue
   until  it  gains  access  or  until  the time specified by SYSTENQ has
   passed.

   When SYSENQTYPE is 0, 1022 does not use PSI.   Instead  it  repeatedly
   tries for access with the ENQ call;  it tries as often as specified by
   SYSTRETRY and as many time as specified by SYSNRETRY.  This mimics the
   retry system but is more efficient.

   When SYSENQTYPE is -1, 1022 does not use PSI.  System 1022 waits until
   the  file  becomes  available.   There  is no time limit and no way to
   cancel the  request  for  the  file.   This  uses  the  fewest  system
   resources  and  offers  the least control to the program.  This is the
   same as the usual COBOL use of ENQ/DEQ.



   3.11.6.4.2  SYSNOPSI

   Some TOPS-10 systems do not allow the use of  PSI  or  require  a  PSI
   table in page 0.  The system variable SYSNOPSI controls the use of PSI
   for these systems.  It may be set by the user or is set by  1022  when
   1022  first  discovers  that  PSI is unavailable.  When SYSNOPSI is 0,
   1022 tries to use PSI.  When SYSNOPSI is 1,  PSI  is  unavailable  and
   1022 does not try to use it.








                                   - 77 -
   THE 1022SA PROGRAM                                           Page 3-15
   Revision 12


   3.11.6.4.3  SYSKEEPPSI

   If 1022 uses  the  PSI  system  (SYSENQTYPE  is  1),  it  enables  PSI
   interrupts, unless it has already done so on a previous ENQ call.  The
   system variable SYSKEEPPSI controls whether 1022  saves  and  restores
   the  PSI  setting in effect before 1022 enabled its own PSI interrupts
   or simply retains the PSI interrupts set by 1022.

   When SYSKEEPPSI is 1, 1022 enables its PSI interrupts and retains  its
   PSI interrupt setting after the file becomes available.  This requires
   less overhead.  On TOPS-10 systems,  the  1022  setting  replaces  the
   prior  PSI setting.  On TOPS-20 systems, the prior PSI setting and the                                                                  ___
   1022 setting are retained.  On TOPS-20 systems, you  can  usually  set
   SYSKEEPPSI  to  1,  unless  you need to reclaim the one channel (of 36
   available) used by the 1022 PSI setting.

   When SYSKEEPPSI is 0, 1022 saves the current PSI setting, enables  its
   own PSI interrupts, then restores the job's previous PSI setting after
   the file becomes available.  Saving and  restoring  the  pre-1022  PSI
   setting  requires  some overhead.  On TOPS-10 systems, you usually set
   SYSKEEPPSI to 0 if you need to restore the prior PSI setting after the
   file becomes available.



   3.11.6.5  Summary Of Simultaneous Update Variables

   The following table  summarizes  the  simultaneous  update  variables.
   Asterisks indicate the 1022 standard default.


                       Simultaneous Update Variables


     VARIABLE   VALUE               EFFECT     ________   _____               ______

   SYSDEQFAST     0     Writes changes to disk before DEQ *
   SYSDEQFAST     1     May write changes to disk after DEQ
   SYSENQDEF      0     By default, data sets are built NOENQ *
   SYSENQDEF      1     By default, data sets are built ENQ
   SYSTRETRY      n     Time between access tries
   SYSNRETRY      n     Number of access tries
   SYSENQTYPE     1     ENQ uses PSI *
   SYSENQTYPE     0     ENQ mimics retry and does not use PSI
   SYSENQTYPE    -1     ENQ waits for access; does not use PSI
   SYSKEEPPSI     1     Changes to 1022 PSI setting *
   SYSKEEPPSI     0     Saves and restores job's PSI setting
   SYSNOPSI       0     PSI available *
   SYSNOPSI       1     PSI unavailable
   SYSTENQ        n     Maximum waiting time for ENQ access



                                   - 78 -
   THE 1022SA PROGRAM                                           Page 3-16
   Revision 12























































                                   - 79 -












                                 CHAPTER 4

                       INSTALLING SYSTEM 1022 PATCHES



   4.1  INTRODUCTION


   Software  House  periodically  distributes  patches  to  System   1022
   software.   In  this  chapter,  we  discuss  the  kinds  of patches we
   distribute and the procedures to apply them.   Apply  all  patches  as
   soon  as  possible  to  insure  a fully effective system.  We send two
   types of patches, FIX and MAKLIB, which  apply  to  three  classes  of
   files in 1022.

   All patches will be sent on paper.  Use a text editor to transcribe  a
   patch  from  the  Software  House  patch sheet to a disk file with the
   extension ".FIX" or ".MAK".  You need  not  remove  text  editor  line
   numbers  from  the  file.   The  1022SA  program  accepts line numbers
   inserted by the SOS or EDIT-20 editors.

   FIX patches are programs written  in  the  1022SA  patching  language.
   These patch programs have the extension ".FIX".  They usually apply to
   1022 stand-alone segments and object time system files  (EXE  and  SHR
   files).   If  the  patch  is  not complicated, FIX files may sometimes
   apply to 1022 relocatable host language library files (REL files).

   MAKLIB patches correct problems in the REL files.  These patches  have
   the  extension  ".MAK".   Use  them  as  input  to  the MAKLIB program
   supplied by DEC.



   4.1.1  Types Of Patchable Files



   System 1022 interactive segments   ______ ____ ___________ ________

      Software  House  distributes  FIX  patches  to  correct  errors  in
      interactive system segments.



                                   - 80 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-2
   Revision 12


   Relocatable 1022 subroutine libraries   ___________ ____ __________ _________

      There are two  relocatable  subroutine  libraries,  HL1022.REL  and
      HR1022.REL.   Use  HL1022.REL  to  load  the  host language library
      routines with your application.  Use HR1022.REL  to  call  an  OTS.
      Patch  REL  files  using  the  MAKLIB  program.   FIX  patches  are
      sometimes applied to REL files due to restrictions  in  the  MAKLIB
      program.


   Object time system files   ______ ____ ______ _____

      An OTS consists of a copy of HL1022.REL and a language OTS  (FOROTS
      or LIBOL), combined using 1022SA.

      FIX patches correct problems in an OTS segment.  Apply FIX  patches
      to  each  OTS segment that your programs use.  Applying a FIX patch
      to an OTS segment does not change the information in HL1022.REL.




   4.1.2  Methods Of Patching

   There are three methods of  applying  patches  to  the  Host  Language
   System.

   Patch HL1022.REL and rebuild all OTS files.   _____ __________ ___ _______ ___ ___ ______

      This method ensures that both HL1022.REL and the  OTS  contain  the
      most recent patches.


   Patch both HL1022 and OTS.   _____ ____ ______ ___ ____

      When applicable, Software House supplies you with corresponding FIX
      and MAKLIB patches.  Apply the MAKLIB patches to HL1022.REL and the
      FIX patches to the OTS.  Applying the fix patch may be faster  than
      rebuilding the OTS.


   Patch only the OTS.   _____ ____ ___ ____

      Apply the FIX patch to the OTS.  Reapply all past patches when  you
      rebuild  your  OTS  unless  you  have patched HL1022.REL.  Use this
      method if your site uses LOADER.  Patching a REL file  with  MAKLIB
      makes the REL file incompatible with LOADER.






                                   - 81 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-3
   Revision 12


   4.2  PATCHING PROCEDURES

   4.2.1  Applying FIX Patches


        1.  Restore the patch file from tape.

            Patch tapes are in BACKUP INTERCHANGE format.   Restore  them
            the same way you install the system (Chapter 1).

        2.  Copy the 1022 files.

            Copy the relevant 1022 files to your disk  area.   The  patch
            sheet  from step 1 lists these file names in a line beginning
            with the characters "/*** .  This line  is  included  in  all
            patches.

        3.  Patch the files.

            Use the PATCH command of the 1022SA program  to  install  the
            patches from the patch file.

            Alternatively, you may wish to install the patches  with  the
            FIX command (see Section 3.7).

        4.  Check for errors.

            Verify that no patch errors occurred.  If errors occur,  your
            1022  files  will  remain unchanged.  You should then contact
            Software House, saving your FXL file in order to  aid  us  in
            diagnosing the problem.

        5.  Copy the patched 1022 files back to the resident disk area.




   4.2.2  Applying MAKLIB Patches


        1.  Restore the patch file from tape.

            Patch tapes are in BACKUP INTERCHANGE format.   Restore  them
            the same way you install the system (Chapter 1).


        2.  Use the CHECK command to the 1022SA program  to  verify  that
            the  MAK  file  is  correct  (see  Section  3.8,  "The  CHECK
            command").




                                   - 82 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-4
   Revision 12


        3.  Copy HL1022.REL to your disk area.


        4.  Patch HL1022.REL.

            On TOPS-10 and TOPS-20, patch HL1022.REL using the  following
            commands in MAKLIB:

            R MAKLIB
            *HL1022.REL = HL1022.REL,PATCH.MAK/FIX
            *^Z


        5.  Check for errors.

            Verify that no  patch  errors  occurred.   If  errors  occur,
            correct your patch file and type the MAKLIB command again.


        6.  Copy the patched version of HL1022.REL back to  the  resident
            disk area.

        7.  Rebuild the OTS segments.  Refer to  Section  3.3,  "The  OTS
            Command."




   4.3  OPERATION

   The PATCH command works in two phases.   Phase  one  (checking  phase)
   checks  that the required 1022 files are present in your disk area and
   that you have transcribed the patch correctly.  For each file checked,
   the PATCH command types out either
             [OK]
        or
             [Errors encountered]

   If phase one detects errors, the patch is aborted and the files remain
   unchanged.

   Phase two (patching phase) performs the patching operation.  For  each
   file patched, the PATCH command types out either

             [No changes]

        or

             [n changes]

   Phase two should produce no errors since phase one  has  verified  the
   patches.

                                   - 83 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-5
   Revision 12


   The PATCH command writes a log of each patch during the checking phase
   into  a  file  called <name>.FXL, where <name> is the name of the file
   that is patched.  If errors occur, examine the .FXL files to determine
   the  line  in  the  transcribed  patch  file  at  which  the error was
   detected.

   Patches contain built-in checksums to catch transcription errors,  and
   to prevent reapplication of the same patch.



   4.4  EXAMPLES

   Examples of patching procedures appear below.  Lines that  begin  with
   the  characters  "/  (except lines that begin with "/*** ) are comment
   lines.  These comments do not affect patch operation, but  are  useful
   for  later  identification.   Comment  lines  may  be  added  by  each
   installation for internal identification.



































                                   - 84 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-6
   Revision 12


   4.4.1  TOPS-10 Example

   .TYPE 410036.FIX

   "/410036 -- 14-MAY-79/
   "/PATCH TO OPTIMIZE DISK I-O/
   "/*** ??1700/
   AOS 1550(11)1W               _
   ./AOSN 1550(11)
   .+1/SETOM 1550(11)
   2140751V         _
   0V   _

   .COPY = STD:??1700.EXE
   .RUN 1022SA
   *PATCH 410036
   Checking QA1700.EXE     [OK]
   Checking QB1700.EXE     [OK]
   Checking QC1700.EXE     [OK]
   Checking QD1700.EXE     [OK]
|  Checking QG1700.EXE     [OK]
   Checking QL1700.EXE     [OK]
   Checking QN1700.EXE     [OK]
   Checking QR1700.EXE     [OK]
   Checking QS1700.EXE     [OK]
   Checking QT1700.EXE     [OK]
   Checking QV1700.EXE     [OK]
   Checking QX1700.EXE     [OK]
   Checking T11700.EXE     [OK]
   Checking T21700.EXE     [OK]
   Checking T31700.EXE     [OK]

   Patching QA1700.EXE     [No changes]
   Patching QB1700.EXE     [No changes]
   Patching QC1700.EXE     [No changes]
   Patching QD1700.EXE     [No changes]
|  Patching QG1700.EXE     [No changes]
   Patching QL1700.EXE     [No changes]
   Patching QN1700.EXE     [2 changes]
   Patching QR1700.EXE     [No changes]
   Patching QS1700.EXE     [No changes]
   Patching QT1700.EXE     [No changes]
   Patching QV1700.EXE     [2 changes]
   Patching QX1700.EXE     [No changes]
   Patching T11700.EXE     [No changes]
   Patching T21700.EXE     [No changes]
   Patching T31700.EXE     [No changes]

   *QUIT

   .COPY STD:*.*<155>=??1700.EXE
   .DELETE ??1700.EXE,*.FXL

                                   - 85 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-7
   Revision 12


   4.4.2  TOPS-20 Example

   @TYPE 410036.FIX

   "/410036 -- 14-MAY-79/
   "/PATCH TO OPTIMIZE DISK I-O/
   "/*** ??1700/
   AOS 1550(11)1W               _
   ./AOSN 1550(11)
   .+1/SETOM 1550(11)
   2140751V         _
   0V   _

   @COPY (FROM) <SUBSYS>%%1700.EXE (TO) *.*

   @RUN 1022SA

   *PATCH 410036
   Checking QL1700.EXE     [OK]
   Checking QN1700.EXE     [OK]
   Checking QX1700.EXE     [OK]
   Checking TE1700.EXE     [OK]

   Patching QN1700.EXE     [2 changes]
   Patching QX1700.EXE     [No changes]
   Patching TE1700.EXE     [No changes]

   *QUIT

   @COPY (FROM) %%1700.EXE (TO) <SUBSYS>*.*
   @DELETE (FILES) %%1700.EXE,*.FXL



   4.4.3  MAKLIB Patches


   Software House  distributes  MAKLIB  patches  for  HL1022.REL.   These
   patches  are  necessary  to  fix  bugs  in  HL1022.REL because the FIX
   patches only apply to .EXE files.  Some of the problems for  which  we
   send  FIX  files  also  require  fixes  in  the .REL files of the Host
   Language System.  MAKLIB patches generally apply to  only  HL1022.REL.
   The  patch  or patch description will usually specify which file(s) to
   patch and may be verified by the following procedure:


        1.  Read the patch to see which module needs to be fixed.






                                   - 86 -
   INSTALLING SYSTEM 1022 PATCHES                                Page 4-8
   Revision 12


        2.  Use the following  commands  to  produce  a  listing  of  the
            modules contained in HR1022.REL and HL1022.REL:

            (On TOPS-10)  .R MAKLIB
                          *TTY:=HR1022.REL/LIS
                          *TTY:=HL1022.REL/LIS

            (On TOPS-20)  @MAKLIB
                          *TTY:=HR1022.REL/LIS
                          *TTY:=HL1022.REL/LIS


   Then apply the patch to the  .REL  file(s)  in  which  the  module  is
   listed.  If you inadvertently apply a patch to the wrong .REL file, no
   harm is done:  MAKLIB will simply produce an  error  message,  leaving
   the .REL file unchanged.

   Programs loaded with HL1022.REL do not use the reentrant library,  and
   must be reloaded after HL1022 patches are applied.

   If you rebuild any of the OTSes supplied by Software House, you should
   apply  all  the MAKLIB patches to HL1022.REL before doing so.  Many of
   the FIX  patches  that  we  supply  get  applied  to  the  OTSes,  and
   rebuilding  these  files  with  unpatched  HL1022.REL  will  cause the
   patches not to be applied.  You do not need to apply the  FIX  patches
   to an OTS that has been rebuilt with a patched HL1022.REL.

   MAKLIB patches should only be applied  at  sites  where  programs  are
   loaded with LINK.  HL1022.REL will not be compatible with LOADER after
   it is patched using the MAKLIB program.























                                   - 87 -












                                 CHAPTER 5

                        SYSTEM 1022 FOROTS INTERFACE



   In order for System 1022 to operate correctly with FOROTS, the FORTRAN
   run-time  system,  minor  changes must be made to the file FOROTS.MAC.
   Although Software House would prefer to have System 1022 operate  with
   no  changes  to  FOROTS,  the dynamic memory management of System 1022
   makes this impossible.



   5.1  SOFTWARE HOUSE FOROTS-5

   The System 1022 distribution tape contains a patched version of FOROTS
   and   the  1022/FORTRAN  object  time  system  that  incorporates  it.
   Software House FOROTS is called FOR22.EXE.  It is not necessarily  the
   latest DEC version.  Installations that do not want to patch their own
   FOROTS may run with  the  Software  House  one  as  described  in  the
   Installation Guide of Chapter 2.



   5.2  FOROTS-5 PATCH

   System 1022 patches to FOROTS.MAC for FOROTS versions between 4C (edit
   511)  and  5A  are  listed  below.   These  patches  are equivalent to
   FORLIB.MAK.   This  patch  should  not  be   applied   to   FORTRAN-6.
   Installations  that  wish  to  patch a FOROTS version 4B (edit 510) or
   earlier should contact Software House.













                                   - 88 -
   SYSTEM 1022 FOROTS INTERFACE                                  Page 5-2
   Revision 12



   Change the line

   INIT%:

   to

   INIT%:
            MOVEI   T1,CHN.TB(P4)   ;[1022] INDICATE FOROTS HAS BEEN
            HRROM   T1,136          ;[1022]  MODIFIED FOR 1022

   Change the line

   GMEM2C:  AOS     T3,.JBREL       ;[511] SET .JBREL UP 1K ...

   to

   GMEM2C:  HLRE    T3,136          ;[1022] SEE IF THIS IS A 1022
            AOJE    T3,GMEM2D       ;[1022]   PROGRAM
            SKIPA                   ;[1022] YES, SKIP RETURN FROM PUSHJ BELOW
            JRST    GMEM2A          ;[1022] RETURN HERE FROM PUSHJ BELOW
            HRLI    T3,GMEM2A       ;[1022] LOAD ADDRESS FOR FUTURE
            MOVE    T2,T1           ;[1022] SIMULATE PRE-EDIT-511 ACS
            JFCL                    ;[1022] PUT IN THREE JFCLS
            JFCL                    ;[1022]   FOR CORRECT RETURN
            JFCL                    ;[1022]   FROM FOLLOWING PUSHJ
            PUSHJ   P,-1(T3)        ;[1022] CALL 1022 CORE MANAGEMENT
   GMEM2D:  AOS     T3,.JBREL       ;[1022] [511] SET .JBREL UP 1K ...



   5.3  PROGRAM OPERATION AND RESTRICTIONS

   The above patches have been tested on FOROTS versions through 5A(721).
   If  the  code  between labels GMEM2A and GMEM3 changes in a subsequent
   version of FOROTS, the above patches may not work and  Software  House
   should be notified.

   User programs must not use location 136 (reserved by DEC for  customer
   use)  because  this location is used by System 1022.  This restriction
   applies also to FORTRAN programs that do not call 1022.

   Except for the restriction on the  use  of  location  136,  the  above
   patches  do  not  affect  FORTRAN programs that do not call 1022.  The
   patched FOROTS  can  completely  replace  the  standard  FOROTS.   All
   standard   FOROTS  capabilities  remain,  including  the  FOROTS  core
   management and channel allocation routines.






                                   - 89 -
   SYSTEM 1022 FOROTS INTERFACE                                  Page 5-3
   Revision 12


   5.4  USE OF OVERLAYS AND SORT IN FORTRAN PROGRAMS

   It is necessary to modify the standard  FORFUN  module  in  FOROTS  in
   order  to  use  1022  with  FORTRAN  overlays or SORT.  Software House
   supplies  the  file  FORFUN.MAC,  modified  for  1022  use,   on   the
   distribution tape.

   The  FORFUN.MAC  supplied  is  DEC  FORFUN  version   5A,   containing
   modifications  that  make  memory  management  during FORTRAN overlays
   compatible with 1022 memory management.











































                                   - 90 -
   SYSTEM 1022 FOROTS INTERFACE                                  Page 5-4
   Revision 12























































                                   - 91 -












                                 CHAPTER 6

                        SYSTEM 1022 LIBOL INTERFACE



   System 1022 has been  tested  with  the  standard  DEC  COBOL  through
   version  12B.  It should operate correctly with those versions without
   any changes to LIBOL.  You must not use COBOL  features  that  perform
   dynamic  memory  management  in  COBOL  versions  11 or before.  These
   features include the SORT verb, TRAFFIC-20, overlays, and ISAM.

   The Host Language  Interface  manual  discusses  the  restrictions  on
   calling 1022 subroutines during COBOL sorts, etc.

   User programs must not use location 136 (reserved by DEC for  customer
   use)  because  this location is used by System 1022.  This restriction
   applies also to COBOL programs that do not call 1022.



   6.1  COBOL 12 UNDER TOPS-20

   6.1.1  Problems

   COBOL version 12 under TOPS-20 will run only with System 1022  version
   113(3) or version 114(0) or later.



   6.1.2  Generating An Object Time System

   LIBO12 is quite large.  Attempting to make an object  time  system  in
   the  standard  way  may result in an OTS that is larger than 64 pages.
   This causes code of the OTS to go past location 700000.

   The OTS command of the 1022SA program will load  a  1022  object  time
   system at any page equal to or above page 400.  The /ORG switch to the
   OTS command does this.  Because this procedure does not append code to
   an  existing  LIBOL EXE file, an input file must not appear in the OTS
   command.  For example,

             OTS SYS:1022D.EXE=/ORG:500/CBL


                                   - 92 -
   SYSTEM 1022 LIBOL INTERFACE                                   Page 6-2
   Revision 12


   Software House recommends loading the 1022/COBOL object time system at
   page 500 as shown in the example above.  With the OTS created as shown
   above, the memory map at run time for a COBOL program will be  similar
   to

             0                   Data Area
             400000              COBOL Program
             500000              1022/COBOL object time system
                                 (1022D.EXE)
             600000              LIBO12.EXE
             700000              PA1050.EXE

   The TOPS-20 operating system builds the above memory map at  run  time
   from  four  files:  PA1050, LIBO12, 1022D, and the COBOL program code.
   Thus the 1022/COBOL object time system does not have LIBOL embedded in
   it.  Because 1022D.EXE contains only 1022 code, it is not necessary to
   regenerate the  object  time  system  whenever  LIBOL  is  patched  or
   changed.



































                                   - 93 -












                                 CHAPTER 7

              INTERFACING SYSTEM 1022 TO OTHER HOST LANGUAGES



   Version 114 or  later  of  System  1022  may  be  interfaced  to  host
   languages other than COBOL, FORTRAN, and MACRO.  See Appendix C of the
   System 1022 Host Language  Interface  Manual  (Revision  3,  September               ____ ________  _________  ______
   1983) for details.



































                                   - 94 -
   INTERFACING SYSTEM 1022 TO OTHER HOST LANGUAGES               Page 7-2
   Revision 12























































                                   - 95 -












                                 CHAPTER 8

                          BILINGUAL ERROR MESSAGES



|  Sites can create  an  alternative  1022  error  message  file  in  the
|  language  of  their  choice  and use the system variable SYSERRTEXT to
|  point to that file instead of to the standard  English  error  message
|  file.   The utility ERFCHK.EXE should be used to assure that the error
|  message file created by the site is of the correct format.  ERFCHK.EXE
|  is included on the distribution tape.
|  
|  An alternate 1022 error message file may be created in  the  following
|  way:
|  
|       1.  Copy the files 1022.ERR and ERFCHK.EXE from the  distribution
|           tape to SYS:
|  
|       2.  Copy 1022.ERR  to  DSK:ERF.ERF.   1022.ERR  is  the  standard
|           English  error  message file;  ERF.ERF is a copy of that file
|           to be edited into the site language.
|  
|       3.  Edit  ERF.ERF,  replacing  the  text  of  the  English  error
|           messages  with  text in the site language.  You may translate
|           as many or as  few  of  the  messages  as  you  choose.   Any
|           messages  left  untranslated  will  appear in English.  Blank
|           messages should be left blank.  The text of  each  translated
|           error  message  should  be  no longer than 72 characters (not
|           including the error code and space at the  beginning  of  the
|           message  line  or  the  carriage  return and line feed at the
|           end).   ERFCHK  will  truncate  messages   longer   than   72
|           characters and will pad shorter messages out to proper length
|           with blanks.
|  
|       4.  Run ERFCHK.EXE.  This will produce the file 1022.ERF  in  the
|           appropriate  format for System 1022, preserving ERF.ERF which
|           may then be deleted or saved for subsequent editing.  If  any
|           errors  are  encountered in producing 1022.ERF, ERFCHK writes
|           these to a file ERF.LOG.





                                   - 96 -
   BILINGUAL ERROR MESSAGES                                      Page 8-2
   Revision 12


|       5.  Copy 1022.ERF to SYS:
|  
|  Users can now specify whether they wish to receive error  messages  in
|  English  or  in the site language with the system variable SYSERRTEXT.
|  The default setting (0) tells 1022 to read the standard English  file,
|  1022.ERR,  when  an  error message is to be produced.  If the value of
|  SYSERRTEXT is set to 1, the system will  instead  read  1022.ERF,  the
|  file containing the translated error messages.
|  
|  SYSERRTEXT is system defaultable and user settable.  The user may  set
|  the  value  of  the  variable  at  any  time during the session (or PL
|  program).  However, once 1022  reads  the  error  file  designated  by
|  SYSERRTEXT,  that  file  remains open for the remainder of the session
|  (even if the user attempts to reset the value of the variable).







































                                   - 97 -












                                 CHAPTER 9

                              SYSTEM 1022 HELP



   The System 1022 distribution tape contains three files that allow  you
   to install a set of on-line Help messages for access from within 1022.
   The usual and most straightforward procedure is simply to install  the
   set  of Help messages that Software House has preprocessed (1022.DMH).
   Under certain circumstances, however, you might wish to edit the  text
   file  (HELP22.TXT)  to tailor the messages to your specific site, say,
   by translating them into a second language, and  then  run  that  file
   through  the  preprocessor  (HELP22.EXE)  to create your own 1022.DMH.
   Both procedures are explained below.




   9.1  1022.DMH


   The file named 1022.DMH on the distribution  tape  is  the  result  of
   running  the text file HELP22.TXT through the preprocessor HELP22.EXE.
   HELP22.TXT contains  Help  messages  that  provide  information  about
   System 1022 commands.

   All that is necessary to install 1022.DMH for use is to copy the  file
   to  1022's  resident  disk  area,  following the procedure outlined in
   Section 2.11.




   9.2  CREATING A NEW 1022.DMH FILE


   An alternative to installing the 1022.DMH file from  the  distribution
   tape  is  to create a new 1022.DMH by modifying HELP22.TXT and running
   it through the preprocessor (HELP22.EXE).





                                   - 98 -
   SYSTEM 1022 HELP                                              Page 9-2
   Revision 12


   9.2.1  Modifying HELP22.TXT


   The recommended way of tailoring the  1022  Help  file  to  suit  your
   site's particular needs is as follows:


        1.  Make a copy of HELP22.TXT and save it under another  name  as
|           backup.   This  will assure you of having a clean copy of the
|           standard file in the event that  you  encounter  difficulties
|           during  the  editing  process  and  need  to fall back on the
|           original.  Further, any problems encountered with  HELP  must
|           be  reproducible  with  the  standard  HELP22.TXT if Software
|           House is to be of assistance in solving them.

        2.  Modify or add messages to  HELP22.TXT.   If  you  are  adding
            messages,  putting  them  in  a  separate  file  that is then
            appended to HELP22.TXT  will  simplify  future  installation.
|           There  is  a  1000-entry  limit on the number of entries that
|           HELP22.TXT can hold.

        3.  After copying HELP22.TXT and HELP22.EXE to your  area,  issue
            the command:

                 .Run HELP22.EXE (TOPS-10)

                             or

                 @Run HELP22.EXE (TOPS-20).


        4.  HELP22.EXE generates 1022.DMH.  This file should be copied to
            1022's   resident  disk  area  according  to  the  procedures
            outlined in Section 2.11.
|  
|       5.  An additional file, HELP22.IDX, is generated as a  by-product
|           of  running  HELP22.EXE.   HELP22.IDX  is a reference file to
|           HELP22.TXT.  It contains the first-line address of each  Help
|           message  in  HELP22.TXT  and any error messages that may have
|           been produced during the process of producing 1022.DMH.













                                   - 99 -
   SYSTEM 1022 HELP                                              Page 9-3
   Revision 12


   9.2.2  Format


   All System 1022 Help messages should have the following format:


        1.  Each Help message consists of a topic line  followed  by  the
            text of the message as it is to appear on the monitor screen.

        2.  Each topic line begins with an ampersand immediately followed
            by the keyword or nested keywords.  For example,

                      &TRANSACT

                        or

                      &TRANSACT DUPLICATES MASTER.


        3.  Topic keywords may be nested  to  any  number  of  levels  by
            putting a space between each keyword, provided that the topic
            line as a whole does  not  exceed  80  characters  (including
            spaces)  and there is a message for each level.  For example,
            for there to be a message for the topic &TRANSACT  DUPLICATES
            MASTER,  there  must  also  be  messages  for  &TRANSACT  and
            &TRANSACT DUPLICATES.
|  
|       4.  Subtopic keywords for the next level down  are  automatically
|           listed  at  the end of a message.  For example, the subtopics
|           APPLIED, DUPLICATES, SORTED, and UNAPPLIED are listed at  the
|           end  of  the  TRANSACT  message, and the subtopics MASTER and
|           TRANSACT are listed at the end  of  the  TRANSACT  DUPLICATES
|           message.   The  automatic listing of subtopic keywords may be
|           suppressed through the use of the hyphen.  When a hyphen  (-)
|           immediately precedes a keyword in a topic line, the subtopics
|           for that keyword are not printed at the end of  the  message.
|           For  example,  &-TRANSACT  would  inhibit  the listing of the
|           subtopics APPLIED, DUPLICATES, SORTED, and UNAPPLIED  at  the
|           end  of  the  TRANSACT  message.  &TRANSACT -DUPLICATES would
|           keep the subtopics MASTER and TRANSACT from being  listed  at
|           the end of the TRANSACT DUPLICATES message.

        5.  Topic keywords must be unique in their first  ten  characters
            (because  1022  scans  only  the first ten characters of each
|           keyword when a Help command  is  issued)  and  all  of  those
|           characters  must be legal.  Legal characters are the numerals
|           from 0 to 9, the upper-case letters of the alphabet,  @,  - ,
|           $,  and  blank.  The ampersand (&) may only occur as the very
|           first character in the topic line.  When the  hyphen  (-)  is
|           immediately  preceded by the ampersand or a blank, it is read
|           as a flag to inhibit the automatic listing  of  subtopics  at
|           the  end  of the message.  Otherwise, the hyphen is read as a

                                  - 100 -
   SYSTEM 1022 HELP                                              Page 9-4
   Revision 12


|           regular character.

        6.  Messages (including the automatically inserted listing of any
            subtopics)  will  scroll off the screen if they are more than
            21 lines long.





   9.2.3  Error Messages


   Two kinds of error messages are generated by HELP22.EXE,  fatal  error
   messages and warning error messages.




   9.2.3.1  Fatal Error Messages



        1.  'Truncated command not unique' -- Your HELP22.TXT contains  a
            keyword  whose first ten characters are the same as the first
            ten characters of some other keyword.

        2.  'Empty input file' -- Your HELP22.TXT is empty.

        3.  'Format  error  in  input  file' -- One  or  more   of   your
            HELP22.TXT   messages   does   not   conform  to  the  format
            specifications given above.

        4.  'Internal buffer allocation exhausted' -- So  much  text  has
            been   added  to  your  HELP22.TXT  that  the  buffer  cannot
            accomodate it.
|  
|       5.  'Error:  Illegal character' -- An illegal character has  been
|           included  in  the topic line of an error message.  The set of
|           legal characters is described in the preceding section.













                                  - 101 -
   SYSTEM 1022 HELP                                              Page 9-5
   Revision 12


   9.2.3.2  Warning Error Messages



        1.  '(topic) has been redefined' -- A message has been  added  to
            HELP22.TXT  whose  keyword is the same as that for an earlier
            message.  The pointers to the earlier message have been  lost
            as a result.

        2.  'Keyword has been truncated for (topic)' -- A keyword of more
            than ten characters has been used in specifying a topic.

        3.  'No help text available for (topic)' -- A string of  keywords
            has  been  used  to  specify a topic when there is no message
            associated with the substring formed  by  all  but  the  last
            keyword.
|  
|       4.  'Warning - All Topic Keywords have been  converted  to  UPPER
|           CASE' -- In  scanning  Help22.TXT,  the preprocessor converts
|           any lower-case letters that  it  encounters  in  keywords  to
|           upper case.
































                                  - 102 -
   SYSTEM 1022 HELP                                          Page Index-1
   Revision 12


                                   INDEX



   1022SA                               common system variables
     command format, 3-1                  SYSHLNAME, 3-10
                                          SYSNOSEGP, 3-11
   Bilingual error messages, 8-1          SYSSCRDEV, 3-12
                                          SYSWRITE20, 3-11
   CHECK command, 3-9                   ENQ data set variables
   COBLIB                                 SYSENQDEF, 3-13
     modified                             SYSENQTYPE, 3-14
       TOPS-20, 2-41                      SYSEQFAST, 3-13
     unmodified                           SYSKEEPPSI, 3-15
       TOPS-20, 2-40                      SYSNOPSI, 3-14
   COBOL, 2-22                            SYSTENQ, 3-13
     checking versions of               nonstandard TOPS-10 variables
       TOPS-10, 2-29                      SYSCLOSE2, 3-12
       TOPS-20, 2-43                      SYSNOFILOP, 3-12
     installing, 2-22                     SYSNOXCHAN, 3-13
   COBOL-11 and earlier                   SYSSFDFLAG, 3-12
     TOPS-20, 2-29                    Disk area
   COBOL-12                             resident, 2-45
     TOPS-20, 2-30, 6-1               Distribution tape
   COBOL-13                             restoring to disk, 1-1
     TOPS-20                            returning, 1-2
       modified, 2-41                 Documentation files, 1-6
       unmodified, 2-40                   
   COBOL-68                           Error messages
     autopatched                        bilingual, 8-1
       TOPS-10, 2-23                    from HELP22.EXE, 9-4
       TOPS-20, 2-31                  Expiration date
     modified                           System 1022, 2-47
       TOPS-10, 2-23                      
       TOPS-20, 2-31                  File functions, 1-2
     non-autopatched                  File names, 1-2
       TOPS-10, 2-25                  FIX command, 3-8
       TOPS-20, 2-34                  FOROTS, 5-1
   COBOL-74                             modified and unmodified
     autopatched                          TOPS-10, 2-15
       TOPS-10, 2-26                      TOPS-20, 2-18
       TOPS-20, 2-36                    operation and restrictions,
     modified                             5-2
       TOPS-10, 2-26                    single modified
       TOPS-20, 2-35                      TOPS-20, 2-19
     non-autopatched                    with FORTRAN overlays and SORT,
       TOPS-10, 2-28                      5-3
       TOPS-20, 2-38                  FOROTS-5
                                        patch, 5-1
   DBA                                  Software House, 5-1
     designate, 2-45                  FORTRAN, 2-7
   DBA command, 3-5                   FORTRAN-10

                                  - 103 -
   SYSTEM 1022 HELP                                          Page Index-2
   Revision 12


   DEFAULT command, 3-9                 TOPS-10, 2-14




















































                                  - 104 -
   SYSTEM 1022 HELP                                          Page Index-3
   Revision 12


     TOPS-20, 2-21                    LIBOL
   FORTRAN-5                            unmodified
     maintained at your site              TOPS-10, 2-22
       TOPS-10, 2-9                       TOPS-20, 2-30
       TOPS-20, 2-18                  LIBOL interface, 6-1
     Software House                     OTS command, 6-1
       TOPS-10, 2-9                       
       TOPS-20, 2-18                  MACRO, 2-43
   FORTRAN-6                          Maintenance files, 1-3
     forced migration to, 1-15        Model configuration of 1022, 1-9
     TOPS-10, 2-11                        
     TOPS-20, 2-21                    OTS
   FORTRAN-6 and later                  adjust program interface to,
     TOPS-20, 2-21                        1-14
   FORTRAN-7                            make compatible with 1022,
     TOPS-10, 2-12                        1-13
     TOPS-20, 2-21                    OTS command, 3-2
                                        LIBOL interface, 6-1
   Help messages, 9-1                     
     1022.DMH, 9-1                    PA1050, 2-3
     error messages from HELP22.EXE,  PATCH command, 3-8, 4-4
       9-4                            Patches, 4-1
     format, 9-3                        examples
     HELP22.TXT, 9-2                      TOPS-10, 4-6
   Host Language Interface                TOPS-20, 4-7
     installing, 1-12                   FIX, 4-3
   Host Language OTS                    FOROTS-5, 5-1
     combining with 1022 OTS, 1-14      MAKLIB, 4-3, 4-7
   Host language system, 1-10           methods of patching, 4-2
   Host languages                       types of files, 4-1
     modified, 1-15                   Primer files, 1-7
     not COBOL, FORTRAN, or MACRO,        
       7-1                            Report generator
     unmodified, 1-15                   interactive, 1-8
   Host languages on a fork           RESIDE command, 3-1
     TOPS-20, 2-44                    Resident disk area, 2-45
                                          
   Images for resident disk area      Software House FORTRAN-5
     TOPS-10, 1-2                       TOPS-10, 2-9
     TOPS-20, 1-3                       TOPS-20, 2-18
   INFO command, 3-4                  System 1022
   INFORM DBA command, 3-7              configuration
   INSTAL program, 2-2                    verify, 2-46
   Installing 1022                      copy to resident disk area,
     overview, 1-8                        2-46
     step-by-step procedure, 2-1        expiration date, 2-47
   Interactive 1022, 1-9                interactive, 1-9
     installing, 1-12                     installing, 1-12
     TOPS-10, 2-2                       model configuration, 1-9
     TOPS-20, 2-3                       structure, 1-8
   Interactive report generator,      System variable defaults, 2-46
     1-8                                  

                                  - 105 -
   SYSTEM 1022 HELP                                          Page Index-4
   Revision 12


                                      Variable defaults




















































                                  - 106 -
   SYSTEM 1022 HELP                                          Page Index-5
   Revision 12


     system, 2-46                     
                                      
   Warning messages                   
     from HELP22.EXE, 9-4             
                                      
















































                                  - 107 -
    ' 
"